(this["webpackJsonptrack-mail-2019-kichyr"]=this["webpackJsonptrack-mail-2019-kichyr"]||[]).push([[0],{13:function(e,t,a){e.exports={attachmentType:"styles_attachmentType__3eIKC",message_form:"styles_message_form__1Sm1a",input_panel:"styles_input_panel__1ju52",sendMessForm:"styles_sendMessForm__3A8xD",result:"styles_result__3ivTG",messageText:"styles_messageText__3PziE"}},14:function(e,t,a){e.exports={profileImg:"styles_profileImg__2xgSU",profile_form:"styles_profile_form__3nryD",topLineContainer:"styles_topLineContainer__-JsNv",profileTopic:"styles_profileTopic__1KL6U",name:"styles_name__1J8hG",status:"styles_status__344Hm"}},16:function(e,t,a){e.exports={modal:"createNewChatForm_modal__2X5FK",modal_content:"createNewChatForm_modal_content__VsNJG",close:"createNewChatForm_close__3DTMr"}},17:function(e,t,a){e.exports={dateTime:"singleMessage_dateTime__2etYS",singleMessContainer:"singleMessage_singleMessContainer__3QHsN",singleMess:"singleMessage_singleMess__2Tm8v",msg:"singleMessage_msg__1XUX_"}},18:function(e,t,a){e.exports={plusbut:"plusButtonStyles_plusbut__ICY__",horizontal_plus:"plusButtonStyles_horizontal_plus__HIBYs",vertical_plus:"plusButtonStyles_vertical_plus__3Wy4d"}},19:function(e,t,a){e.exports={container:"topLine_container__1R9Zm",chatImg:"topLine_chatImg__1A5Li",topic:"topLine_topic__1fCyY"}},20:function(e,t,a){e.exports={arrow:"backArrow_arrow__ANJaT",arrowTop:"backArrow_arrowTop__291_W",arrowBottom:"backArrow_arrowBottom__2hX51"}},38:function(e,t,a){e.exports=a(71)},57:function(e,t,a){},58:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(30),r=a.n(c),l=a(5),o=a(10),i=a(2),p=a.n(i),u=a(15),m=a(4),g=a(31);a(57);var d=function(){return s.a.createElement("div",{className:"burgerButt"},s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null))};a(58);function _(){return s.a.createElement("input",{type:"text",placeholder:"Search.."})}var h=function(){return s.a.createElement("div",{className:"container"},s.a.createElement(d,null),s.a.createElement(_,null))},f=a(8),v=a.n(f),E=a(11),w=a(18),b=a(16),x=a(35),S=a.n(x),y={userId:1},C="http://127.0.0.1:8000/";var L=function(e){return s.a.createElement("div",null,"".concat(e.first_name," ").concat(e.last_name))};var N=function(e){var t=e.selectedUsers,a=e.setSelectedUsers,c=Object(n.useState)({value:"",suggestions:[]}),r=Object(o.a)(c,2),i=r[0],u=r[1],m={placeholder:"Type a some part of user name",value:i.value,onChange:function(e,t){var a=t.newValue;u(Object(l.a)({},i,{value:a}))}.bind(this)};return s.a.createElement(S.a,{suggestions:i.suggestions,onSuggestionsFetchRequested:function(e){!function(e,t){p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:fetch(C+"users/profile/"+e,{crossDomain:!0,mode:"cors",method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(a){var n=JSON.parse(a);t({value:e,suggestions:n.users})}));case 1:case"end":return a.stop()}}))}(e.value,u)},onSuggestionsClearRequested:function(){u({value:"",suggestions:[]})},getSuggestionValue:function(e){return e.name},renderSuggestion:L,inputProps:m,onSuggestionSelected:function(e,n){var s=n.suggestion;console.log(s),a([].concat(Object(E.a)(t),[s]))}})};function j(e){var t=e.setHiding;return s.a.createElement("div",{role:"button",id:"isActiveForSetHiding",tabIndex:0,className:w.plusbut,onClick:t},s.a.createElement("div",{className:w.horizontal_plus,id:"isActiveForSetHiding"}),s.a.createElement("div",{className:w.vertical_plus,id:"isActiveForSetHiding"}))}function O(e){var t=e.isHide,a=e.setHiding,c=e.setChats,r=e.chats,l=Object(n.useState)([]),i=Object(o.a)(l,2),p=i[0],u=i[1],m=null;return Object(n.useEffect)((function(){u([])}),[t]),s.a.createElement("div",{className:b.modal,id:"isActiveForSetHiding",style:t?{display:"block"}:{display:"none"},role:"button",tabIndex:0,onClick:a},s.a.createElement("div",{className:b.modal_content},s.a.createElement("span",{className:b.close,id:"isActiveForSetHiding",role:"button",tabIndex:0,onClick:a},"\xd7"),s.a.createElement("h2",null,"Create new chat"),s.a.createElement("br",null),s.a.createElement("input",{className:b.topic,ref:function(e){m=e},type:"text",name:"topic",placeholder:"Chat Topic"}),s.a.createElement(N,{selectedUsers:p,setSelectedUsers:u}),s.a.createElement("div",{style:{width:"80%"}},p.map((function(e,t){return s.a.createElement("div",{key:t.toString()},s.a.createElement("p",null,"".concat(e.first_name," ").concat(e.last_name)))}))),s.a.createElement("button",{onClick:function(e){e.preventDefault(),c(function(){var e=function(e,t){var a={topic:e,users_ids:t.map((function(e,t){return e.id}))};return fetch(C+"chats/create_chat",{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()}))}(m.value,p);return[].concat(Object(E.a)(r),[e])}()),a(e)}},s.a.createElement("span",{id:"isActiveForSetHiding"},"Create new chat"))))}var k=function(e){var t=e.setChats,a=e.chats,c=Object(n.useState)(!1),r=Object(o.a)(c,2),l=r[0],i=r[1],p=function(e){e.preventDefault(),e.stopPropagation(),"isActiveForSetHiding"===e.target.id&&i(!l)};return s.a.createElement(s.a.Fragment,null,s.a.createElement(j,{setHiding:p}),s.a.createElement(O,{isHide:l,setHiding:p,setChats:t,chats:a}))},T=function e(t){var a,n,s;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,p.a.awrap(fetch(C+"users/contacts_list",{crossDomain:!0,mode:"cors",method:"GET",credentials:"include"}));case 3:if(200!==(a=c.sent).status){c.next=12;break}return c.next=7,p.a.awrap(a.json());case 7:n=c.sent,s=JSON.parse(n),t(s),c.next=13;break;case 12:console.log("not a 200");case 13:c.next=18;break;case 15:c.prev=15,c.t0=c.catch(0),console.log(c.t0);case 18:return c.prev=18,setTimeout((function(){e(t)}),5e3),c.finish(18);case 21:case"end":return c.stop()}}),null,null,[[0,15,18,21]])};var A=function(e,t,a){var n=Object(m.f)();return e.map((function(e,c){return s.a.createElement("div",{className:v.a.chatwrap,key:c.toString()},s.a.createElement("div",{onClick:function(s){n.push("".concat(window.publicUrl,"/chat")),a(Object(l.a)({},t,{openedChat:Object(l.a)({},t.openedChat,{chatId:e.chat_id})})),function(e,t){!function(e,t){var a,n,s;p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,p.a.awrap(fetch(C+"chats/get_chat/"+e,{crossDomain:!0,mode:"cors",method:"GET",credentials:"include"}));case 3:if(200!==(a=c.sent).status){c.next=12;break}return c.next=7,p.a.awrap(a.json());case 7:n=c.sent,s=JSON.parse(n),t({appPage:"Chat",openedChat:{chatId:s.chat_id,topic:s.topic,messages:s.messages.reverse()},prevAppPage:"ChatList"}),c.next=13;break;case 12:console.log("not a 200");case 13:c.next=18;break;case 15:c.prev=15,c.t0=c.catch(0),console.log(c.t0);case 18:case"end":return c.stop()}}),null,null,[[0,15]])}(e,t)}(e.chat_id,a)},role:"button",tabIndex:0,className:v.a.wrap,id:e.chat_id},s.a.createElement("img",{className:v.a.chatImg,src:"http://emilcarlsson.se/assets/rachelzane.png",alt:""}),s.a.createElement("div",{className:v.a.meta},s.a.createElement("div",{className:v.a.topic},"".concat(e.chat__topic)," "),s.a.createElement("div",{className:v.a.preview},e.chat__last_message," ")),s.a.createElement("div",{className:v.a.addinfo},s.a.createElement("span",{className:v.a.dot}),s.a.createElement("p",null,"21:23"))))}))};function I(e){var t=e.chats,a=e.appState,n=e.setAppState;return s.a.createElement("div",{className:v.a.dialogsListContainer},null!==t&&A(t,a,n))}var D=function(e){var t=e.appState,a=e.setAppState,c=Object(n.useState)([]),r=Object(o.a)(c,2),l=r[0],i=r[1];return Object(n.useEffect)((function(){T(i)}),[]),s.a.createElement("div",{className:v.a.dialog_list_wrap},s.a.createElement(h,null),s.a.createElement(I,{chats:l,setChats:i,appState:t,setAppState:a}),s.a.createElement(k,{setChats:i,chats:l}))},P=a(36),M=a(17),H=a.n(M),z=a(19),F=a.n(z),U=a(13),B=a.n(U),J=a(20),G=a.n(J);var V=function(){return s.a.createElement("div",{className:G.a.arrow,style:{transform:"scale(-1, 1) scale(0.3)"}},s.a.createElement("div",{className:G.a.arrowTop}),s.a.createElement("div",{className:G.a.arrowBottom}))},R='\n<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 512 512" style="max-width: 100%; max-height: 100%;" style="enable-background:new 0 0 512 512;" xml:space="preserve" fill="blue">\n<g>\n\t<g>\n\t\t<path d="M506.955,1.314c-3.119-1.78-6.955-1.75-10.045,0.078L313.656,109.756c-4.754,2.811-6.329,8.943-3.518,13.697\n\t\t\tc2.81,4.753,8.942,6.328,13.697,3.518l131.482-77.749L210.411,303.335L88.603,266.069l158.965-94\n\t\t\tc4.754-2.812,6.329-8.944,3.518-13.698c-2.81-4.753-8.943-6.33-13.697-3.518L58.91,260.392c-3.41,2.017-5.309,5.856-4.84,9.791\n\t\t\ts3.216,7.221,7.004,8.38l145.469,44.504L270.72,439.88c0.067,0.121,0.136,0.223,0.207,0.314c1.071,1.786,2.676,3.245,4.678,4.087\n\t\t\tc1.253,0.527,2.57,0.784,3.878,0.784c2.563,0,5.086-0.986,6.991-2.849l73.794-72.12l138.806,42.466\n\t\t\tc0.96,0.293,1.945,0.438,2.925,0.438c2.116,0,4.206-0.672,5.948-1.961C510.496,409.153,512,406.17,512,403V10\n\t\t\tC512,6.409,510.074,3.093,506.955,1.314z M271.265,329.23c-1.158,1.673-1.779,3.659-1.779,5.694v61.171l-43.823-79.765\n\t\t\tl193.921-201.21L271.265,329.23z M289.486,411.309v-62.867l48.99,14.988L289.486,411.309z M492,389.483l-196.499-60.116\n\t\t\tL492,45.704V389.483z"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d="M164.423,347.577c-3.906-3.905-10.236-3.905-14.143,0l-93.352,93.352c-3.905,3.905-3.905,10.237,0,14.143\n\t\t\tC58.882,457.024,61.441,458,64,458s5.118-0.976,7.071-2.929l93.352-93.352C168.328,357.815,168.328,351.483,164.423,347.577z"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d="M40.071,471.928c-3.906-3.903-10.236-3.903-14.142,0.001l-23,23c-3.905,3.905-3.905,10.237,0,14.143\n\t\t\tC4.882,511.024,7.441,512,10,512s5.118-0.977,7.071-2.929l23-23C43.976,482.166,43.976,475.834,40.071,471.928z"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d="M142.649,494.34c-1.859-1.86-4.439-2.93-7.069-2.93c-2.641,0-5.21,1.07-7.07,2.93c-1.86,1.86-2.93,4.43-2.93,7.07\n\t\t\tc0,2.63,1.069,5.21,2.93,7.07c1.86,1.86,4.44,2.93,7.07,2.93s5.21-1.07,7.069-2.93c1.86-1.86,2.931-4.44,2.931-7.07\n\t\t\tC145.58,498.77,144.51,496.2,142.649,494.34z"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d="M217.051,419.935c-3.903-3.905-10.233-3.905-14.142,0l-49.446,49.445c-3.905,3.905-3.905,10.237,0,14.142\n\t\t\tc1.953,1.953,4.512,2.929,7.071,2.929s5.118-0.977,7.071-2.929l49.446-49.445C220.956,430.172,220.956,423.84,217.051,419.935z"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d="M387.704,416.139c-3.906-3.904-10.236-3.904-14.142,0l-49.58,49.58c-3.905,3.905-3.905,10.237,0,14.143\n\t\t\tc1.953,1.952,4.512,2.929,7.071,2.929s5.118-0.977,7.071-2.929l49.58-49.58C391.609,426.377,391.609,420.045,387.704,416.139z"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d="M283.5,136.31c-1.86-1.86-4.44-2.93-7.07-2.93s-5.21,1.07-7.07,2.93c-1.859,1.86-2.93,4.44-2.93,7.08\n\t\t\tc0,2.63,1.07,5.2,2.93,7.06c1.86,1.87,4.44,2.93,7.07,2.93s5.21-1.06,7.07-2.93c1.859-1.86,2.93-4.43,2.93-7.06\n\t\t\tC286.43,140.75,285.36,138.17,283.5,136.31z"/>\n\t</g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n</svg>\n',Y='\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\tposition="relative" style="max-width: 100%; max-height: 100%;" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve" fill="blue">\n<g>\n\t<path d="M97.344,482.17c-23.311,0-45.215-9.084-61.689-25.555c-34.01-34.014-34.01-89.361,0-123.371L305.343,63.543\n\t\tc21.727-21.75,50.645-33.713,81.39-33.713c30.75,0,59.667,11.963,81.395,33.713c21.748,21.744,33.726,50.645,33.726,81.389\n\t\tc0,30.75-11.964,59.65-33.708,81.381L255.843,438.596c-6.374,6.371-16.696,6.371-23.067,0c-6.374-6.373-6.374-16.695,0-23.07\n\t\tl212.298-212.283c15.583-15.58,24.153-36.291,24.153-58.311c0-22.016-8.588-42.74-24.167-58.322\n\t\tc-15.583-15.58-36.294-24.154-58.327-24.154c-22.029,0-42.74,8.574-58.323,24.154L58.725,356.311\n\t\tc-21.283,21.301-21.283,55.938,0,77.234c20.645,20.617,56.589,20.617,77.233,0l181.091-181.105\n\t\tc4.924-4.924,7.745-11.74,7.745-18.688c0-7.045-2.755-13.686-7.759-18.689c-10.291-10.291-27.067-10.322-37.358,0L156,338.754\n\t\tc-6.37,6.375-16.697,6.375-23.067,0c-6.374-6.371-6.374-16.697,0-23.066l123.673-123.691c23.005-23.004,60.461-23.004,83.497,0\n\t\tc11.169,11.166,17.317,26,17.317,41.756c0,15.547-6.308,30.762-17.3,41.754L159.029,456.615\n\t\tC142.555,473.086,120.65,482.17,97.344,482.17z"/>\n</g>\n</svg>\n',Q=a(37);function X(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return(t=new FormData).append("user_id",e.user_id),t.append("chat_id",e.chat_id),t.append("content",e.content),a.next=6,p.a.awrap(fetch(C+"chats/send_message",{method:"POST",body:t}));case 6:a.sent;case 7:case"end":return a.stop()}}))}var q=function e(t,a,n,s){Object(P.a)(this,e),this.content=n,this.user_id=a,this.added_at=function(){var e=new Date,t="".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate()),a="".concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds());return"".concat(t," ").concat(a)}(),this.chat_id=t,this.contentType=s};function K(e){var t=e.topic,a=e.appState,n=e.setAppState,c=Object(m.f)();return s.a.createElement("div",{id:"chatTopLine",className:F.a.container},s.a.createElement("div",{id:"chatBack",onClick:function(e){n(Object(l.a)({},a,{appPage:"ChatList",prevAppPage:c.location})),c.push("".concat(window.publicUrl,"/"))},style:{flex:"0.2"},role:"button",tabIndex:0},s.a.createElement(V,null)),s.a.createElement("div",{className:F.a.topic}," ",t," "))}function W(e){var t,a=e.messages,c=e.appState,r=(e.setAppState,Object(m.f)());return Object(n.useEffect)((function(){t.scrollTop=t.scrollHeight}),[a]),s.a.createElement("div",{className:B.a.result,style:{scrollTop:"scrollHeight"},ref:function(e){t=e}},a.map((function(e,t){return s.a.createElement("div",{key:t.toString(),className:H.a.singleMessContainer},s.a.createElement("input",{type:"image",onClick:function(e){r.push("".concat(window.publicUrl,"/profile"),c)},className:F.a.chatImg,src:"http://emilcarlsson.se/assets/rachelzane.png",alt:"Avatar"}),s.a.createElement("div",{className:H.a.singleMess,sender:e.users_id===y.userId?"me":"him"},s.a.createElement("div",{className:H.a.singleMessText},"link"===e.contentType?s.a.createElement("a",{href:e.messageText}," ",e.content," "):s.a.createElement("div",null," ",e.content," ")),s.a.createElement("p",{className:H.a.dateTime}," ",e.added_at," ")))})))}function Z(e){var t=e.appState,a=e.setAppState,n=s.a.createRef(),c=s.a.createRef(),r=Object(Q.usePosition)(),o=r.latitude,i=r.longitude;return s.a.createElement("div",{className:B.a.input_panel},s.a.createElement("form",{className:B.a.sendMessForm,onSubmit:function(e){e.preventDefault();var n=e.target[0].value;if(""!==n.replace(/\s/gi,"")){var s=new q(t.openedChat.chatId,y.userId,n,"text");console.log(s),console.log(y.userId),a(Object(l.a)({},t,{},Object.assign(t.openedChat,{messages:[].concat(Object(E.a)(t.openedChat.messages),[s])}))),X(s),e.target[0].value=""}}},s.a.createElement("input",{ref:n,type:"text",className:B.a.messageText,maxLength:"512",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u0438\u043d\u0435"}),s.a.createElement("div",{style:{margin:"5px",flex:"0.3",maxHeight:"100%"}},s.a.createElement("div",{ref:c,className:B.a.attachmentType},s.a.createElement("div",null,"\u0424\u0430\u0439\u043b"),s.a.createElement("div",{onClick:function(e){e.preventDefault();var n=new q(t.openedChat.chatId,y.userId,"https://www.openstreetmap.org/#map=18/".concat(o,"/").concat(i),"link");X(n),a(Object(l.a)({},t,{},Object.assign(t.openedChat,{messages:[].concat(Object(E.a)(t.openedChat.messages),[n])}))),c.current.style.transform="scale(0)"}},"\u041c\u043e\u044f \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044f"),s.a.createElement("div",null,"\u0410\u0443\u0434\u0438\u043e\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0435")),s.a.createElement("div",{dangerouslySetInnerHTML:{__html:Y},style:{height:"100%"},onClick:function(e){c.current.style.transform="scale(1)"!==c.current.style.transform?"scale(1)":"scale(0)"}})),s.a.createElement("label",{style:{flex:"0.3",display:"flex",maxHeight:"100%"}},s.a.createElement("input",{style:{display:"none"},type:"submit",value:""}),s.a.createElement("div",{dangerouslySetInnerHTML:{__html:R},style:{flex:"1",margin:"5px"}}))))}var $=function(e){var t=e.appState,a=e.setAppState;return Object(n.useEffect)((function(){console.log(t.openedChat),function e(t,a){var n,s,c;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,p.a.awrap(fetch(C+"chats/get_chat/"+t,{crossDomain:!0,mode:"cors",method:"GET",credentials:"include"}));case 3:if(200!==(n=r.sent).status){r.next=13;break}return r.next=7,p.a.awrap(n.json());case 7:s=r.sent,c=JSON.parse(s),a({appPage:"Chat",openedChat:{chatId:c.chat_id,topic:c.topic,messages:c.messages.reverse()},prevAppPage:"ChatList"}),console.log(c.messages),r.next=14;break;case 13:console.log("not a 200");case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(0),console.log(r.t0);case 19:return r.prev=19,setTimeout((function(){e(t,a)}),5e3),r.finish(19);case 22:case"end":return r.stop()}}),null,null,[[0,16,19,22]])}(t.openedChat.chatId,a)}),[]),s.a.createElement("div",{className:B.a.message_form},s.a.createElement(K,{topic:t.openedChat.topic,appState:t,setAppState:a}),s.a.createElement(W,{messages:t.openedChat.messages,appState:t,setAppState:a}),s.a.createElement(Z,{appState:t,setAppState:a}))},ee=a(14),te=a.n(ee);function ae(e){var t=e.appState,a=(e.setAppState,Object(m.f)());return s.a.createElement("div",{id:"profileTopLine",className:te.a.topLineContainer},s.a.createElement("div",{id:"profileBack",onClick:function(e){a.push("".concat(window.publicUrl,"/").concat(t.prevAppPage))},style:{flex:"0.2"},role:"button",tabIndex:0},s.a.createElement(V,null)),s.a.createElement("div",{className:te.a.profileTopic}," Profile Page "))}var ne=function(e){var t=e.appState,a=e.setAppState;return s.a.createElement("div",{className:te.a.profile_form},s.a.createElement(ae,{appState:t,setAppState:a}),s.a.createElement("img",{className:te.a.profileImg,src:"http://emilcarlsson.se/assets/rachelzane.png",alt:"Avatar"}),s.a.createElement("div",{className:te.a.name},"\u041a\u0438\u0440\u0438\u043b\u043b \u0427\u0435\u043a\u0430\u043d\u043e\u0432"),s.a.createElement("div",{className:te.a.status},"Status: no pain no gain"))};a(70);var se=function(e){var t=Object(n.useState)({appPage:"",prevAppPage:"ChatList",openedChat:{chatId:-1,topic:"",messages:[]}}),a=Object(o.a)(t,2),c=a[0],r=a[1];return Object(n.useEffect)((function(){Array.isArray(JSON.parse(localStorage.getItem("DialogList")))||localStorage.clear(),function(){var e,t,a;p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,p.a.awrap(fetch(C+"users/whoami",{crossDomain:!0,mode:"cors",method:"GET",credentials:"include"}));case 3:if(200!==(e=n.sent).status){n.next=12;break}return n.next=7,p.a.awrap(e.json());case 7:t=n.sent,a=JSON.parse(t),y.userId=a.user_id,n.next=13;break;case 12:console.log("not a 200");case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),console.log(n.t0);case 18:case"end":return n.stop()}}),null,null,[[0,15]])}()}),[]),window.publicUrl="/static","/static"===window.publicUrl&&(window.publicUrl=""),s.a.createElement(u.a,null,s.a.createElement(g.a,{atEnter:{opacity:0},atLeave:{opacity:0},atActive:{opacity:1},className:"switch-wrapper"},s.a.createElement(m.a,{path:"".concat(window.publicUrl,"/chat/")},(function(e){return"Chat"!==c.appPage&&r(Object(l.a)({},c,{appPage:"Chat"})),s.a.createElement($,{appState:c,setAppState:r})})),s.a.createElement(m.a,{path:"".concat(window.publicUrl,"/")},(function(e){return"ChatList"!==c.appPage&&r(Object(l.a)({},c,{appPage:"ChatList",prevAppPage:c.appPage})),s.a.createElement(D,{appState:c,setAppState:r})})),s.a.createElement(m.a,{path:"".concat(window.publicUrl,"/profile/")},(function(e){return"ProfilePage"!==c.appPage&&r(Object(l.a)({},c,{appPage:"ProfilePage",prevAppPage:c.appPage})),s.a.createElement(ne,{appState:c,setAppState:r})}))))};r.a.render(s.a.createElement(se,null),document.getElementById("root"))},8:function(e,t,a){e.exports={dialog_list_wrap:"DialogList_dialog_list_wrap__8jDdH",translating:"DialogList_translating__2VsUs",modal:"DialogList_modal__2jYn0","modal-content":"DialogList_modal-content__2sQCj",close:"DialogList_close__mj83R",plusbut:"DialogList_plusbut__5xaUS","horizontal-plus":"DialogList_horizontal-plus__2hIb5","vertical-plus":"DialogList_vertical-plus__2al7V",container:"DialogList_container__TgqVT",dialogsListContainer:"DialogList_dialogsListContainer__rSctl",chatwrap:"DialogList_chatwrap__3ibf_",wrap:"DialogList_wrap__2BclI",meta:"DialogList_meta__3QcWi",addinfo:"DialogList_addinfo__39jLj",chatImg:"DialogList_chatImg__3neQO",preview:"DialogList_preview__1B4wF",topic:"DialogList_topic__30BO-",dot:"DialogList_dot__3C_N6"}}},[[38,1,2]]]);
//# sourceMappingURL=main.6807079d.chunk.js.map