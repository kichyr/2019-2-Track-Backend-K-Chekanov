{"version":3,"sources":["components/DialogPage/styles.module.css","components/ProfilePage/styles.module.css","components/CreateNewChat/createNewChatForm.module.css","components/DialogPage/singleMessage.module.css","components/CreateNewChat/plusButtonStyles.module.css","components/DialogPage/topLine.module.css","components/BackArrow/backArrow.module.css","components/BurgerButton/BurgerButton.js","components/TopLineDialogList/TopLineDialogList.js","components/whoami.js","components/CreateNewChat/UserAppender.js","components/CreateNewChat/CreateNewChat.js","components/DialogList/DialogList.js","components/BackArrow/BackArrow.js","components/DialogPage/svgVariables.js","components/DialogPage/MessageForm.js","components/ProfilePage/ProfilePage.js","App.js","index.js","components/DialogList/DialogList.module.css"],"names":["module","exports","BurgerButton","className","SearchBar","type","placeholder","TopLineDialogList","WHOAMI","userId","HOST","renderSuggestion","suggestion","first_name","last_name","UserSuggester","selectedUsers","setSelectedUsers","useState","value","suggestions","state","setState","inputProps","onChange","event","newValue","bind","this","onSuggestionsFetchRequested","a","async","fetch","crossDomain","mode","method","credentials","then","response","json","data","parsedDate","JSON","parse","users","getSuggestions","onSuggestionsClearRequested","getSuggestionValue","name","onSuggestionSelected","e","console","log","PlusButton","setHiding","role","id","tabIndex","plusButtonStyles","onClick","CreateNewDialogForm","isHide","setChats","chats","topicForm","useEffect","CNDialogFormStyles","style","display","ref","input","UserAppender","width","map","user","index","key","toString","preventDefault","newChat","Topic","topic","users_ids","cache","headers","body","stringify","createNewChat","CreateChatStuff","hidden","handleClick","stopPropagation","target","Fragment","getDialogsList","status","myJson","setTimeout","GenerateList","appState","setAppState","history","useHistory","chat","styles","chatwrap","push","window","publicUrl","openedChat","chatId","chat_id","chatIdParameter","appPage","messages","prevAppPage","getChat","openChat","wrap","chatImg","src","alt","meta","chat__topic","preview","chat__last_message","addinfo","dot","DialogListImpl","dialogsListContainer","DialogList","dialog_list_wrap","CreateNewChat","BackArrow","arrow","transform","arrowTop","arrowBottom","PAPER_AIRPLANE","CLIP","postMessage","message","formData","FormData","append","messageText","Message","contentType","time","today","Date","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getTime","TopLine","topLineStyles","container","location","flex","MessagesContainer","mContainer","scrollTop","scrollHeight","result","el","singleMessStyles","singleMessContainer","singleMess","sender","singleMessText","href","dateTime","InputPanel","textInput","React","createRef","attachmentTypeDiv","usePosition","latitude","longitude","input_panel","sendMessForm","onSubmit","messText","replace","newMess","Object","assign","maxLength","margin","maxHeight","attachmentType","current","dangerouslySetInnerHTML","__html","height","MessageForm","message_form","topLineContainer","profileTopic","ProfilePage","profile_form","profileImg","App","props","Array","isArray","localStorage","getItem","clear","user_id","determineWhoAmI","process","atEnter","opacity","atLeave","atActive","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b7ff903f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"attachmentType\":\"styles_attachmentType__3eIKC\",\"message_form\":\"styles_message_form__1Sm1a\",\"input_panel\":\"styles_input_panel__1ju52\",\"sendMessForm\":\"styles_sendMessForm__3A8xD\",\"result\":\"styles_result__3ivTG\",\"messageText\":\"styles_messageText__3PziE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileImg\":\"styles_profileImg__2xgSU\",\"profile_form\":\"styles_profile_form__3nryD\",\"topLineContainer\":\"styles_topLineContainer__-JsNv\",\"profileTopic\":\"styles_profileTopic__1KL6U\",\"name\":\"styles_name__1J8hG\",\"status\":\"styles_status__344Hm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"createNewChatForm_modal__2X5FK\",\"modal_content\":\"createNewChatForm_modal_content__VsNJG\",\"close\":\"createNewChatForm_close__3DTMr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dateTime\":\"singleMessage_dateTime__2etYS\",\"singleMessContainer\":\"singleMessage_singleMessContainer__3QHsN\",\"singleMess\":\"singleMessage_singleMess__2Tm8v\",\"msg\":\"singleMessage_msg__1XUX_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"plusbut\":\"plusButtonStyles_plusbut__ICY__\",\"horizontal_plus\":\"plusButtonStyles_horizontal_plus__HIBYs\",\"vertical_plus\":\"plusButtonStyles_vertical_plus__3Wy4d\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"topLine_container__1R9Zm\",\"chatImg\":\"topLine_chatImg__1A5Li\",\"topic\":\"topLine_topic__1fCyY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"arrow\":\"backArrow_arrow__ANJaT\",\"arrowTop\":\"backArrow_arrowTop__291_W\",\"arrowBottom\":\"backArrow_arrowBottom__2hX51\"};","import React from 'react';\nimport './BurgerButton.css';\n\nfunction BurgerButton() {\n\treturn (\n\t\t<div className=\"burgerButt\">\n\t\t\t<div />\n\t\t\t<div />\n\t\t\t<div />\n\t\t</div>\n\t);\n}\nexport default BurgerButton;","import React from 'react';\nimport BurgerButton from '../BurgerButton/BurgerButton';\nimport './TopLineDialogList.css';\n\nfunction SearchBar() {\n\treturn <input type=\"text\" placeholder=\"Search..\" />;\n}\n\nfunction TopLineDialogList() {\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t<BurgerButton />\n\t\t\t<SearchBar/>\n\t\t</div>\n\t);\n}\n\nexport default TopLineDialogList;","export const WHOAMI = {userId: 1, };\nexport const HOST = \"http://127.0.0.1:8000/\";","import React, { useState } from 'react';\nimport Autosuggest from 'react-autosuggest';\nimport {HOST} from '../whoami';\n\n\nasync function getSuggestions(value, setState) {\n  fetch(HOST + 'users/profile/' + value, {\n     crossDomain:true,\n      mode: 'cors',\n      method: 'GET',\n      credentials: 'include'\n    })\n      .then(response => {\n        return response.json()\n      })\n      .then((data) => {\n        const parsedDate = JSON.parse(data);\n        setState({value: value, suggestions: parsedDate.users});\n      });\n}\n\nconst renderSuggestion = suggestion => (\n  <div>\n    {`${suggestion.first_name} ${suggestion.last_name}`}\n  </div>\n);\n\n\n// SEARCH USERS\nfunction UserSuggester({selectedUsers, setSelectedUsers}) {\n  const [state, setState] = useState({\n    value: '',\n    suggestions: [],\n  });\n  const onChange = (event, { newValue }) => {\n      setState({\n        ...state,\n        value: newValue,\n      });\n\n  };\n  // Autosuggest will call this function every time you need to clear suggestions.\n  const onSuggestionsClearRequested = () => {\n    setState({\n      value: '',\n      suggestions: []\n    });\n  };\n\n  // When suggestion is clicked, Autosuggest needs to populate the input\n  // based on the clicked suggestion. Teach Autosuggest how to calculate the\n  // input value for every given suggestion.\n  const getSuggestionValue = suggestion => suggestion.name;\n\n  // Autosuggest will call this function every time you need to update suggestions.\n  // You already implemented this logic above, so just use it.\n  const onSuggestionsFetchRequested = ({ value }) => {\n    getSuggestions(value, setState);\n  };\n\n  const inputProps = {\n    placeholder: 'Type a some part of user name',\n    value: state.value,\n    onChange: onChange.bind(this),\n  };\n\n  const onSuggestionSelected = (e, {suggestion}) => {\n    console.log(suggestion);\n    setSelectedUsers([...selectedUsers, suggestion])\n  }\n\n  return (\n    <Autosuggest\n      suggestions={state.suggestions}\n      onSuggestionsFetchRequested={onSuggestionsFetchRequested}\n      onSuggestionsClearRequested={onSuggestionsClearRequested}\n      getSuggestionValue={getSuggestionValue}\n      renderSuggestion={renderSuggestion}\n      inputProps={inputProps}\n      onSuggestionSelected={onSuggestionSelected}\n    />\n\n  )\n}\n\n\nexport default UserSuggester;","import React, { useState, useEffect } from 'react';\nimport * as plusButtonStyles from './plusButtonStyles.module.css';\nimport * as CNDialogFormStyles from './createNewChatForm.module.css';\nimport UserAppender from './UserAppender';\nimport {HOST} from '../whoami';\n\n// create new Chat in local storage and return created chat\nfunction createNewChat(Topic, selectedUsers) {\n  const data = {topic: Topic, users_ids: selectedUsers.map((user, index)=>(user.id))};\n  // Значения по умолчанию обозначены знаком *\n    return fetch(HOST+'chats/create_chat', {\n        method: 'POST', // *GET, POST, PUT, DELETE, etc.\n        mode: 'cors', // no-cors, cors, *same-origin\n        cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n        credentials: 'include', // include, *same-origin, omit\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(data), // тип данных в body должен соответвовать значению заголовка \"Content-Type\"\n    })\n    .then(response => response.json()); // парсит JSON ответ в Javascript объект\n}\n\nfunction PlusButton({ setHiding }) {\n  return (\n    <div\n      role=\"button\"\n      id={'isActiveForSetHiding'}\n      tabIndex={0}\n      className={plusButtonStyles.plusbut}\n      onClick={setHiding}\n    >\n      <div className={plusButtonStyles.horizontal_plus} id={'isActiveForSetHiding'} />\n      <div className={plusButtonStyles.vertical_plus} id={'isActiveForSetHiding'} />\n    </div>\n  )\n}\n\nfunction CreateNewDialogForm({ isHide, setHiding, setChats, chats }) {\n  const [selectedUsers, setSelectedUsers] = useState([])\n\n  let topicForm = null\n  const createChatButt = (e) => {\n    e.preventDefault()\n    setChats(\n      (() => {\n        const newChat = createNewChat(topicForm.value, selectedUsers)\n        const newChats = [...chats, newChat]\n        return newChats\n      })(),\n    )\n    setHiding(e)\n  }\n\n  useEffect(()=>{\n    setSelectedUsers([]);\n  }, [isHide])\n    \n\n  return (\n    <div\n      className={CNDialogFormStyles.modal}\n      id=\"isActiveForSetHiding\"\n      style={isHide ? { display: 'block' } : { display: 'none' }}\n      role=\"button\"\n      tabIndex={0}\n      onClick={setHiding}\n    >\n      <div className={CNDialogFormStyles.modal_content}>\n        <span\n          className={CNDialogFormStyles.close}\n          id=\"isActiveForSetHiding\"\n          role=\"button\"\n          tabIndex={0}\n          onClick={setHiding}\n        >\n          &times;\n        </span>\n        <h2>Create new chat</h2>\n        <br />\n        <input\n          className={CNDialogFormStyles.topic}\n          ref={(input) => {\n            topicForm = input\n          }}\n          type=\"text\"\n          name=\"topic\"\n          placeholder=\"Chat Topic\"\n        />\n      \n        <UserAppender selectedUsers={selectedUsers} setSelectedUsers={setSelectedUsers}/>\n        \n        <div\n          style= {{\n            width: '80%',\n          }}\n        >\n          {selectedUsers.map((user, index) => (\n            <div key={index.toString()}>\n                <p>{`${user.first_name} ${user.last_name}`}</p>\n            </div>\n          ))}\n        </div>\n        <button onClick={createChatButt}>\n          <span id=\"isActiveForSetHiding\">Create new chat</span>\n        </button>\n      </div>\n    </div>\n  )\n}\n\nfunction CreateChatStuff({ setChats, chats }) {\n  const [hidden, setHiding] = useState(false)\n  const handleClick = (e) => {\n    e.preventDefault()\n    e.stopPropagation()\n    if (e.target.id === 'isActiveForSetHiding') hidden ? setHiding(false) : setHiding(true)\n  }\n\n  return (\n    <React.Fragment>\n      <PlusButton setHiding={handleClick} />\n      <CreateNewDialogForm isHide={hidden} setHiding={handleClick} setChats={setChats} chats={chats} />\n    </React.Fragment>\n  )\n}\n\nexport default CreateChatStuff\n","import React, { useState, useEffect } from 'react';\nimport TopLineDialogList from '../TopLineDialogList/TopLineDialogList';\nimport styles from './DialogList.module.css';\nimport CreateNewChat from '../CreateNewChat/CreateNewChat';\nimport { useHistory } from 'react-router-dom';\nimport { HOST } from '../whoami';\n\n\nconst getDialogsList = async (setChats) => {\n  try {\n      const response = await fetch(HOST + 'users/contacts_list', {\n        crossDomain:true,\n         mode: 'cors',\n         method: 'GET',\n         credentials: 'include',\n       });\n      if (response.status === 200) {\n          const myJson = await response.json(); //extract JSON from the http response\n          const data = JSON.parse(myJson);\n          setChats(data);\n      } else {\n          console.log(\"not a 200\");\n      }\n  } catch (err) {\n      // catches errors both in fetch and response.json\n      console.log(err);\n  } finally {\n      // do it again in 2 seconds\n      setTimeout(() => {getDialogsList(setChats)}, 5000);\n  }\n};\n\n\nasync function getChat(chatIdParameter, setAppState) {\n  try {\n    const response = await fetch(HOST + 'chats/get_chat/' + chatIdParameter, {\n      crossDomain:true,\n      mode: 'cors',\n      method: 'GET',\n      credentials: 'include',\n    });\n    if (response.status === 200) {\n        const myJson = await response.json(); //extract JSON from the http response\n        const data = JSON.parse(myJson);\n        setAppState({\n          appPage: 'Chat',\n          openedChat:{\n            chatId: data.chat_id, topic: data.topic, messages: data.messages},\n          prevAppPage: 'ChatList',\n        })\n    } else {\n        console.log(\"not a 200\");\n    }\n  } catch (err) {\n      // catches errors both in fetch and response.json\n      console.log(err);\n  }\n}\n\nconst GenerateList = (chats, appState, setAppState) => {\n  let history = useHistory()\n  return chats.map((chat, index) => (\n    <div className={styles.chatwrap} key={index.toString()}>\n      <div\n        onClick={(e) => {\n          history.push(`${window.publicUrl}/chat`)\n          setAppState({...appState, openedChat: {...appState.openedChat, chatId: chat.chat_id}});\n          openChat(chat.chat_id, setAppState);\n        }}\n        role=\"button\"\n        tabIndex={0}\n        className={styles.wrap}\n        id={chat.chat_id}\n      >\n        <img className={styles.chatImg} src=\"http://emilcarlsson.se/assets/rachelzane.png\" alt=\"\" />\n        <div className={styles.meta}>\n          <div className={styles.topic}>{`${chat.chat__topic}`} </div>\n          <div className={styles.preview}>{chat.chat__last_message} </div>\n        </div>\n        <div className={styles.addinfo}>\n          <span className={styles.dot} />\n          <p>21:23</p>\n        </div>\n      </div>\n    </div>\n  ))\n}\n\nfunction DialogListImpl({ chats, appState, setAppState }) {\n  return <div className={styles.dialogsListContainer}>{chats !== null && GenerateList(chats, appState, setAppState)}</div>\n}\n\nfunction openChat(chatId, setAppState) {\n  getChat(chatId, setAppState);\n}\n\nfunction DialogList({ appState, setAppState }) {\n  const [chats, setChats] = useState([])\n  const loadExistingChats = () => {\n    getDialogsList(setChats)\n  }\n  useEffect(loadExistingChats, [])\n\n  return (\n    <div className={styles.dialog_list_wrap}>\n      <TopLineDialogList />\n      <DialogListImpl chats={chats} setChats={setChats} appState={appState} setAppState={setAppState} />\n      <CreateNewChat setChats={setChats} chats={chats} />\n    </div>\n  )\n}\n\nexport default DialogList\n","import React from 'react';\nimport style from './backArrow.module.css';\n\nfunction BackArrow() {\n\treturn (\n\t\t<div className={style.arrow} style={{\n\t\t\ttransform: 'scale(-1, 1) scale(0.3)'}}>\n\t\t\t<div className={style.arrowTop} />\n\t\t\t<div className={style.arrowBottom} />\n\t\t</div>\n\t);\n}\n\nexport default BackArrow;","export const PAPER_AIRPLANE = `\n<svg version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\n\t viewBox=\"0 0 512 512\" style=\"max-width: 100%; max-height: 100%;\" style=\"enable-background:new 0 0 512 512;\" xml:space=\"preserve\" fill=\"blue\">\n<g>\n\t<g>\n\t\t<path d=\"M506.955,1.314c-3.119-1.78-6.955-1.75-10.045,0.078L313.656,109.756c-4.754,2.811-6.329,8.943-3.518,13.697\n\t\t\tc2.81,4.753,8.942,6.328,13.697,3.518l131.482-77.749L210.411,303.335L88.603,266.069l158.965-94\n\t\t\tc4.754-2.812,6.329-8.944,3.518-13.698c-2.81-4.753-8.943-6.33-13.697-3.518L58.91,260.392c-3.41,2.017-5.309,5.856-4.84,9.791\n\t\t\ts3.216,7.221,7.004,8.38l145.469,44.504L270.72,439.88c0.067,0.121,0.136,0.223,0.207,0.314c1.071,1.786,2.676,3.245,4.678,4.087\n\t\t\tc1.253,0.527,2.57,0.784,3.878,0.784c2.563,0,5.086-0.986,6.991-2.849l73.794-72.12l138.806,42.466\n\t\t\tc0.96,0.293,1.945,0.438,2.925,0.438c2.116,0,4.206-0.672,5.948-1.961C510.496,409.153,512,406.17,512,403V10\n\t\t\tC512,6.409,510.074,3.093,506.955,1.314z M271.265,329.23c-1.158,1.673-1.779,3.659-1.779,5.694v61.171l-43.823-79.765\n\t\t\tl193.921-201.21L271.265,329.23z M289.486,411.309v-62.867l48.99,14.988L289.486,411.309z M492,389.483l-196.499-60.116\n\t\t\tL492,45.704V389.483z\"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d=\"M164.423,347.577c-3.906-3.905-10.236-3.905-14.143,0l-93.352,93.352c-3.905,3.905-3.905,10.237,0,14.143\n\t\t\tC58.882,457.024,61.441,458,64,458s5.118-0.976,7.071-2.929l93.352-93.352C168.328,357.815,168.328,351.483,164.423,347.577z\"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d=\"M40.071,471.928c-3.906-3.903-10.236-3.903-14.142,0.001l-23,23c-3.905,3.905-3.905,10.237,0,14.143\n\t\t\tC4.882,511.024,7.441,512,10,512s5.118-0.977,7.071-2.929l23-23C43.976,482.166,43.976,475.834,40.071,471.928z\"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d=\"M142.649,494.34c-1.859-1.86-4.439-2.93-7.069-2.93c-2.641,0-5.21,1.07-7.07,2.93c-1.86,1.86-2.93,4.43-2.93,7.07\n\t\t\tc0,2.63,1.069,5.21,2.93,7.07c1.86,1.86,4.44,2.93,7.07,2.93s5.21-1.07,7.069-2.93c1.86-1.86,2.931-4.44,2.931-7.07\n\t\t\tC145.58,498.77,144.51,496.2,142.649,494.34z\"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d=\"M217.051,419.935c-3.903-3.905-10.233-3.905-14.142,0l-49.446,49.445c-3.905,3.905-3.905,10.237,0,14.142\n\t\t\tc1.953,1.953,4.512,2.929,7.071,2.929s5.118-0.977,7.071-2.929l49.446-49.445C220.956,430.172,220.956,423.84,217.051,419.935z\"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d=\"M387.704,416.139c-3.906-3.904-10.236-3.904-14.142,0l-49.58,49.58c-3.905,3.905-3.905,10.237,0,14.143\n\t\t\tc1.953,1.952,4.512,2.929,7.071,2.929s5.118-0.977,7.071-2.929l49.58-49.58C391.609,426.377,391.609,420.045,387.704,416.139z\"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d=\"M283.5,136.31c-1.86-1.86-4.44-2.93-7.07-2.93s-5.21,1.07-7.07,2.93c-1.859,1.86-2.93,4.44-2.93,7.08\n\t\t\tc0,2.63,1.07,5.2,2.93,7.06c1.86,1.87,4.44,2.93,7.07,2.93s5.21-1.06,7.07-2.93c1.859-1.86,2.93-4.43,2.93-7.06\n\t\t\tC286.43,140.75,285.36,138.17,283.5,136.31z\"/>\n\t</g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n</svg>\n`\n\nexport const CLIP = `\n<svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\n\tposition=\"relative\" style=\"max-width: 100%; max-height: 100%;\" viewBox=\"0 0 512 512\" enable-background=\"new 0 0 512 512\" xml:space=\"preserve\" fill=\"blue\">\n<g>\n\t<path d=\"M97.344,482.17c-23.311,0-45.215-9.084-61.689-25.555c-34.01-34.014-34.01-89.361,0-123.371L305.343,63.543\n\t\tc21.727-21.75,50.645-33.713,81.39-33.713c30.75,0,59.667,11.963,81.395,33.713c21.748,21.744,33.726,50.645,33.726,81.389\n\t\tc0,30.75-11.964,59.65-33.708,81.381L255.843,438.596c-6.374,6.371-16.696,6.371-23.067,0c-6.374-6.373-6.374-16.695,0-23.07\n\t\tl212.298-212.283c15.583-15.58,24.153-36.291,24.153-58.311c0-22.016-8.588-42.74-24.167-58.322\n\t\tc-15.583-15.58-36.294-24.154-58.327-24.154c-22.029,0-42.74,8.574-58.323,24.154L58.725,356.311\n\t\tc-21.283,21.301-21.283,55.938,0,77.234c20.645,20.617,56.589,20.617,77.233,0l181.091-181.105\n\t\tc4.924-4.924,7.745-11.74,7.745-18.688c0-7.045-2.755-13.686-7.759-18.689c-10.291-10.291-27.067-10.322-37.358,0L156,338.754\n\t\tc-6.37,6.375-16.697,6.375-23.067,0c-6.374-6.371-6.374-16.697,0-23.066l123.673-123.691c23.005-23.004,60.461-23.004,83.497,0\n\t\tc11.169,11.166,17.317,26,17.317,41.756c0,15.547-6.308,30.762-17.3,41.754L159.029,456.615\n\t\tC142.555,473.086,120.65,482.17,97.344,482.17z\"/>\n</g>\n</svg>\n`\n","import React, { useEffect } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport singleMessStyles from './singleMessage.module.css'\nimport {WHOAMI, HOST} from '../whoami'\nimport topLineStyles from './topLine.module.css'\nimport styles from './styles.module.css'\nimport BackArrow from '../BackArrow/BackArrow'\nimport { PAPER_AIRPLANE, CLIP } from './svgVariables'\nimport { usePosition } from 'use-position'\n\n// to delete\nfunction getTime() {\n  const today = new Date()\n  const date = `${today.getFullYear()}-${today.getMonth() + 1}-${today.getDate()}`\n  const time = `${today.getHours()}:${today.getMinutes()}:${today.getSeconds()}`\n  return `${date} ${time}`\n}\n\n// FIX, need to update only messages that don't exist yet\nasync function getChat(chatIdParameter, setAppState) {\n  try {\n    const response = await fetch(HOST + 'chats/get_chat/' + chatIdParameter, {\n      crossDomain:true,\n      mode: 'cors',\n      method: 'GET',\n      credentials: 'include',\n    });\n    if (response.status === 200) {\n        const myJson = await response.json(); //extract JSON from the http response\n        const data = JSON.parse(myJson);\n        setAppState({\n          appPage: 'Chat',\n          openedChat:{\n            chatId: data.chat_id, topic: data.topic, messages: data.messages},\n          prevAppPage: 'ChatList',\n        })\n    } else {\n        console.log(\"not a 200\");\n    }\n  } catch (err) {\n      // catches errors both in fetch and response.json\n      console.log(err);\n  }\n}\n\nasync function postMessage(message) {\n  const formData  = new FormData();\n\n  formData.append('user_id', message.userId);\n  formData.append('chat_id', message.chatId);\n  formData.append('content', message.messageText);\n\n  const response = await fetch(HOST + 'chats/send_message', {\n    method: 'POST',\n    body: formData\n  });\n}\n\nclass Message {\n  constructor(chatId, userId, messageText, contentType) {\n    this.messageText = messageText\n    this.userId = userId\n    this.time = getTime()\n    this.chatId = chatId\n    this.contentType = contentType\n  }\n}\n\nfunction TopLine({ topic, appState, setAppState }) {\n  const history = useHistory()\n  return (\n    <div id=\"chatTopLine\" className={topLineStyles.container}>\n      <div\n        id=\"chatBack\"\n        onClick={(e) => {\n          setAppState({ ...appState, appPage: 'ChatList', prevAppPage: history.location })\n          history.push(`${window.publicUrl}/`)\n        }}\n        style={{ flex: '0.2' }}\n        role=\"button\"\n        tabIndex={0}\n      >\n        <BackArrow />\n      </div>\n      <div className={topLineStyles.topic}> {topic} </div>\n    </div>\n  )\n}\n\nfunction MessagesContainer({ messages, appState, setAppState }) {\n  let mContainer\n  const history = useHistory()\n  // eslint-disable-next-line\n  useEffect(() => {\n    // Обновляем заголовок документа с помощью API браузера\n    // eslint-disable-next-line\n    mContainer.scrollTop = mContainer.scrollHeight\n    // eslint-disable-next-line\n  }, [messages])\n  return (\n    <div\n      className={styles.result}\n      style={{ scrollTop: 'scrollHeight' }}\n      ref={(el) => {\n        mContainer = el\n      }}\n    >\n      {messages.map((message, index) => (\n        <div key={index.toString()} className={singleMessStyles.singleMessContainer}>\n          <input\n            type=\"image\"\n            onClick={(e) => {\n              // setAppState(Object.assign({}, appState, {appPage: 'ProfilePage', prevAppPage: 'Chat'}));\n              history.push(`${window.publicUrl}/profile`, appState)\n            }}\n            className={topLineStyles.chatImg}\n            src=\"http://emilcarlsson.se/assets/rachelzane.png\"\n            alt=\"Avatar\"\n          />\n          <div className={singleMessStyles.singleMess} sender={message.userId === WHOAMI.userId ? 'me' : 'him'}>\n            <div className={singleMessStyles.singleMessText}>\n              {(() => {\n                if (message.contentType === 'link') return <a href={message.messageText}> {message.messageText} </a>\n                return <div> {message.messageText} </div>\n              })()}\n            </div>\n            <p className={singleMessStyles.dateTime}> {message.time} </p>\n          </div>\n        </div>\n      ))}\n    </div>\n  )\n}\n\nfunction InputPanel({ appState, setAppState }) {\n  const sendMessage = (e) => {\n    e.preventDefault()\n    const messText = e.target[0].value\n    if (messText.replace(/\\s/gi, '') === '') {\n      return\n    }\n    const newMess = new Message(appState.openedChat.chatId, WHOAMI.userId, messText, 'text')\n    postMessage(newMess)\n    setAppState({\n      ...appState,\n      ...Object.assign(appState.openedChat, { messages: [...appState.openedChat.messages, newMess] }),\n    })\n    e.target[0].value = ''\n  }\n\n  let textInput = React.createRef()\n  let attachmentTypeDiv = React.createRef()\n  const { latitude, longitude } = usePosition()\n\n  const GeolocationHandler = (e) => {\n    e.preventDefault()\n    const newMess = new Message(\n      appState.openedChat.chatId,\n      WHOAMI.userId,\n      `https://www.openstreetmap.org/#map=18/${latitude}/${longitude}`,\n      'link',\n    )\n    postMessage(newMess)\n    setAppState({\n      ...appState,\n      ...Object.assign(appState.openedChat, { messages: [...appState.openedChat.messages, newMess] }),\n    })\n    attachmentTypeDiv.current.style.transform = 'scale(0)'\n  }\n\n  return (\n    <div className={styles.input_panel}>\n      <form className={styles.sendMessForm} onSubmit={sendMessage}>\n        <input\n          ref={textInput}\n          type=\"text\"\n          className={styles.messageText}\n          maxLength=\"512\"\n          placeholder=\"Введите сообщеине\"\n        />\n        <div\n          style={{\n            margin: '5px',\n            flex: '0.3',\n            maxHeight: '100%',\n          }}\n        >\n          <div ref={attachmentTypeDiv} className={styles.attachmentType}>\n            <div>Файл</div>\n            <div onClick={GeolocationHandler}>Моя геолокация</div>\n            <div>Аудиосообщене</div>\n          </div>\n          <div\n            dangerouslySetInnerHTML={{ __html: CLIP }}\n            style={{\n              height: '100%',\n            }}\n            onClick={(e) => {\n              attachmentTypeDiv.current.style.transform =\n                attachmentTypeDiv.current.style.transform !== 'scale(1)' ? 'scale(1)' : 'scale(0)'\n            }}\n          />\n        </div>\n\n        <label\n          style={{\n            flex: '0.3',\n            display: 'flex',\n            maxHeight: '100%',\n          }}\n        >\n          <input style={{ display: 'none' }} type=\"submit\" value=\"\" />\n\n          <div dangerouslySetInnerHTML={{ __html: PAPER_AIRPLANE }} style={{ flex: '1', margin: '5px' }} />\n        </label>\n      </form>\n    </div>\n  )\n}\n\nfunction MessageForm({ appState, setAppState }) {\n  useEffect(() => {\n    console.log(appState.openedChat);\n    getChat(appState.openedChat.chatId, setAppState);\n  }, []);\n  return (\n    <div className={styles.message_form}>\n      <TopLine topic={appState.openedChat.topic} appState={appState} setAppState={setAppState} />\n      <MessagesContainer messages={appState.openedChat.messages} appState={appState} setAppState={setAppState} />\n      <InputPanel appState={appState} setAppState={setAppState} />\n    </div>\n  )\n}\n\nMessageForm.propTypes = {\n  appState: PropTypes.shape({\n    appPage: PropTypes.string.isRequired,\n    openedChat: PropTypes.shape({\n      chatId: PropTypes.number,\n      topic: PropTypes.string.isRequired,\n      messages: PropTypes.array.isRequired,\n    }),\n  }).isRequired,\n  setAppState: PropTypes.func.isRequired,\n}\n\nInputPanel.propTypes = {\n  appState: PropTypes.shape({\n    appPage: PropTypes.string.isRequired,\n    openedChat: PropTypes.shape({\n      chatId: PropTypes.number,\n      topic: PropTypes.string.isRequired,\n      messages: PropTypes.array.isRequired,\n    }),\n  }).isRequired,\n  setAppState: PropTypes.func.isRequired,\n}\n\nMessagesContainer.propTypes = {\n  messages: PropTypes.arrayOf(PropTypes.object).isRequired,\n  appState: PropTypes.shape({\n    appPage: PropTypes.string.isRequired,\n    openedChat: PropTypes.shape({\n      chatId: PropTypes.number,\n      topic: PropTypes.string.isRequired,\n      messages: PropTypes.array.isRequired,\n    }),\n  }).isRequired,\n  setAppState: PropTypes.func.isRequired,\n}\n\nTopLine.propTypes = {\n  topic: PropTypes.string.isRequired,\n  appState: PropTypes.shape({\n    appPage: PropTypes.string.isRequired,\n    openedChat: PropTypes.shape({\n      chatId: PropTypes.number,\n      topic: PropTypes.string.isRequired,\n      messages: PropTypes.array.isRequired,\n    }),\n  }).isRequired,\n  setAppState: PropTypes.func.isRequired,\n}\n\nexport default MessageForm\n","import React from 'react'\nimport { useHistory } from 'react-router-dom'\nimport styles from './styles.module.css'\nimport BackArrow from '../BackArrow/BackArrow'\n\nfunction TopLine({ appState, setAppState }) {\n  const history = useHistory()\n  return (\n    <div id=\"profileTopLine\" className={styles.topLineContainer}>\n      <div\n        id=\"profileBack\"\n        onClick={(e) => {\n          history.push(`${window.publicUrl}/${appState.prevAppPage}`)\n        }}\n        style={{ flex: '0.2' }}\n        role=\"button\"\n        tabIndex={0}\n      >\n        <BackArrow />\n      </div>\n      <div className={styles.profileTopic}> Profile Page </div>\n    </div>\n  )\n}\n\nfunction ProfilePage({ appState, setAppState }) {\n  return (\n    <div className={styles.profile_form}>\n      <TopLine appState={appState} setAppState={setAppState} />\n      <img className={styles.profileImg} src=\"http://emilcarlsson.se/assets/rachelzane.png\" alt=\"Avatar\" />\n      <div className={styles.name}>Кирилл Чеканов</div>\n      <div className={styles.status}>Status: no pain no gain</div>\n    </div>\n  )\n}\n\nexport default ProfilePage\n","import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport { AnimatedSwitch } from 'react-router-transition';\nimport DialogList from './components/DialogList/DialogList';\nimport MessageForm from './components/DialogPage/MessageForm';\nimport ProfilePage from './components/ProfilePage/ProfilePage';\nimport './styles/globalStyles.css';\nimport { WHOAMI, HOST } from './components/whoami';\n\n\nasync function determineWhoAmI() {\n  try {\n    const response = await fetch(HOST + 'users/whoami', {\n      crossDomain:true,\n       mode: 'cors',\n       method: 'GET',\n       credentials: 'include',\n     });\n    if (response.status === 200) {\n        const myJson = await response.json(); //extract JSON from the http response\n        const data = JSON.parse(myJson);\n        WHOAMI.userId = data.user_id;\n    } else {\n        console.log(\"not a 200\");\n    }\n  } catch (err) {\n    // catches errors both in fetch and response.json\n    console.log(err);\n  }\n}\n\nconst App = (props) => {\n  const [appState, setAppState] = useState({\n    appPage: '', // Chat, ProfilePage\n    prevAppPage: 'ChatList',\n    openedChat: {\n      chatId: -1,\n      topic: '',\n      messages: [],\n    },\n  })\n  useEffect(() => {\n    if (!Array.isArray(JSON.parse(localStorage.getItem('DialogList')))) localStorage.clear();\n    determineWhoAmI();\n  }, [])\n\n  window.publicUrl = process.env.NODE_ENV === 'production' ? process.env.PUBLIC_URL : ''\n  // FIX\n  if(window.publicUrl === '/static')\n    window.publicUrl = '';\n  //\n  return (\n    <Router>\n      <AnimatedSwitch\n        atEnter={{ opacity: 0 }}\n        atLeave={{ opacity: 0 }}\n        atActive={{ opacity: 1 }}\n        className=\"switch-wrapper\"\n      >\n        <Route path={`${window.publicUrl}/chat/`}>\n          {(props) => {\n            if (appState.appPage !== 'Chat') setAppState({ ...appState, appPage: 'Chat' })\n            return <MessageForm appState={appState} setAppState={setAppState} />\n          }}\n        </Route>\n        <Route path={`${window.publicUrl}/`}>\n          {(props) => {\n            if (appState.appPage !== 'ChatList')\n              setAppState({ ...appState, appPage: 'ChatList', prevAppPage: appState.appPage })\n            return <DialogList appState={appState} setAppState={setAppState} />\n          }}\n        </Route>\n        <Route path={`${window.publicUrl}/profile/`}>\n          {(props) => {\n            if (appState.appPage !== 'ProfilePage')\n              setAppState({ ...appState, appPage: 'ProfilePage', prevAppPage: appState.appPage })\n            return <ProfilePage appState={appState} setAppState={setAppState} />\n          }}\n        </Route>\n      </AnimatedSwitch>\n    </Router>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialog_list_wrap\":\"DialogList_dialog_list_wrap__8jDdH\",\"translating\":\"DialogList_translating__2VsUs\",\"modal\":\"DialogList_modal__2jYn0\",\"modal-content\":\"DialogList_modal-content__2sQCj\",\"close\":\"DialogList_close__mj83R\",\"plusbut\":\"DialogList_plusbut__5xaUS\",\"horizontal-plus\":\"DialogList_horizontal-plus__2hIb5\",\"vertical-plus\":\"DialogList_vertical-plus__2al7V\",\"container\":\"DialogList_container__TgqVT\",\"dialogsListContainer\":\"DialogList_dialogsListContainer__rSctl\",\"chatwrap\":\"DialogList_chatwrap__3ibf_\",\"wrap\":\"DialogList_wrap__2BclI\",\"meta\":\"DialogList_meta__3QcWi\",\"addinfo\":\"DialogList_addinfo__39jLj\",\"chatImg\":\"DialogList_chatImg__3neQO\",\"preview\":\"DialogList_preview__1B4wF\",\"topic\":\"DialogList_topic__30BO-\",\"dot\":\"DialogList_dot__3C_N6\"};"],"sourceRoot":""}