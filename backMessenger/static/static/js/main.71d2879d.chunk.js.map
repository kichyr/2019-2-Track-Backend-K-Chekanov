{"version":3,"sources":["components/DialogList/DialogList.module.css","components/DialogPage/styles.module.css","components/ProfilePage/styles.module.css","components/CreateNewChat/createNewChatForm.module.css","components/DialogPage/singleMessage.module.css","components/CreateNewChat/plusButtonStyles.module.css","components/DialogPage/topLine.module.css","components/BackArrow/backArrow.module.css","components/BurgerButton/BurgerButton.js","components/TopLineDialogList/TopLineDialogList.js","components/whoami.js","components/CreateNewChat/UserAppender.js","components/CreateNewChat/CreateNewChat.js","components/DialogList/DialogList.js","components/BackArrow/BackArrow.js","components/DialogPage/svgVariables.js","actions/sendMessage.js","components/DialogPage/utils.js","components/DialogPage/MessageForm.js","components/ProfilePage/ProfilePage.js","App.js","reducers/index.js","reducers/messagesReducers.js","index.js"],"names":["module","exports","BurgerButton","className","SearchBar","type","placeholder","TopLineDialogList","WHOAMI","userId","HOST","renderSuggestion","suggestion","first_name","last_name","UserSuggester","selectedUsers","setSelectedUsers","useState","value","suggestions","state","setState","inputProps","onChange","event","newValue","bind","this","onSuggestionsFetchRequested","a","async","fetch","crossDomain","mode","method","credentials","then","response","json","data","parsedDate","JSON","parse","users","getSuggestions","onSuggestionsClearRequested","getSuggestionValue","name","onSuggestionSelected","e","console","log","PlusButton","setHiding","role","id","tabIndex","plusButtonStyles","onClick","CreateNewDialogForm","isHide","setChats","chats","topicForm","useEffect","CNDialogFormStyles","style","display","ref","input","UserAppender","width","map","user","index","key","toString","preventDefault","newChat","Topic","topic","users_ids","cache","headers","body","stringify","createNewChat","CreateChatStuff","hidden","handleClick","stopPropagation","target","getDialogsList","status","myJson","setTimeout","GenerateList","appState","setAppState","history","useHistory","chat","styles","chatwrap","push","window","publicUrl","openedChat","chatId","chat_id","chatIdParameter","appPage","messages","reverse","prevAppPage","getChat","openChat","wrap","chatImg","src","alt","meta","chat__topic","preview","chat__last_message","addinfo","dot","DialogListImpl","dialogsListContainer","DialogList","dialog_list_wrap","CreateNewChat","BackArrow","arrow","transform","arrowTop","arrowBottom","PAPER_AIRPLANE","CLIP","FILE_ICON","openAudioMessagePage","Message","messageText","contentType","link","fileName","time","getTime","today","Date","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","sendFile","file","generateFileMeassage","formData","FormData","append","error","undefined","includes","URL","createObjectURL","newMess","Object","assign","CloseButt","styled","div","StartStopButt","AudioMessageSender","record","stateReqord","setStateReqord","isOpened","useSelector","isMessagePageOpen","dispatch","useDispatch","stopRecording","height","position","left","top","justifyContent","alignItems","backgroundColor","borderRadius","overflow","flexDirection","flex","onStop","recordedBlob","blobURL","audioBlob","sendAudioMessage","strokeColor","screen","postMessage","message","users_id","content","TopLine","topLineStyles","container","clearTimeout","timerGettingMess","location","onKeyDown","MessagesContainer","dragging","setDragging","mContainer","React","createRef","current","scrollTop","scrollHeight","result","onDragEnter","DragAndDropImg","handleDragOut","persist","handleDrop","dataTransfer","items","kind","getAsFile","singleMessStyles","singleMessContainer","onDrop","singleMess","sender","singleMessText","href","maxWidth","aria-label","dangerouslySetInnerHTML","__html","autoPlay","controls","dateTime","added_at","InputPanel","textInput","attachmentTypeDiv","usePosition","latitude","longitude","input_panel","sendMessForm","onSubmit","messText","replace","maxLength","margin","maxHeight","attachmentType","files","onDragLeave","onDragOver","border","bottom","right","zIndex","textAlign","color","fontSize","MessageForm","message_form","topLineContainer","profileTopic","ProfilePage","profile_form","profileImg","App","props","Array","isArray","localStorage","getItem","clear","user_id","determineWhoAmI","process","atEnter","opacity","atLeave","atActive","path","allReducers","combineReducers","action","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.71d2879d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialog_list_wrap\":\"DialogList_dialog_list_wrap__8jDdH\",\"translating\":\"DialogList_translating__2VsUs\",\"modal\":\"DialogList_modal__2jYn0\",\"modal-content\":\"DialogList_modal-content__2sQCj\",\"close\":\"DialogList_close__mj83R\",\"plusbut\":\"DialogList_plusbut__5xaUS\",\"horizontal-plus\":\"DialogList_horizontal-plus__2hIb5\",\"vertical-plus\":\"DialogList_vertical-plus__2al7V\",\"container\":\"DialogList_container__TgqVT\",\"dialogsListContainer\":\"DialogList_dialogsListContainer__rSctl\",\"chatwrap\":\"DialogList_chatwrap__3ibf_\",\"wrap\":\"DialogList_wrap__2BclI\",\"meta\":\"DialogList_meta__3QcWi\",\"addinfo\":\"DialogList_addinfo__39jLj\",\"chatImg\":\"DialogList_chatImg__3neQO\",\"preview\":\"DialogList_preview__1B4wF\",\"topic\":\"DialogList_topic__30BO-\",\"dot\":\"DialogList_dot__3C_N6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"attachmentType\":\"styles_attachmentType__3eIKC\",\"message_form\":\"styles_message_form__1Sm1a\",\"input_panel\":\"styles_input_panel__1ju52\",\"sendMessForm\":\"styles_sendMessForm__3A8xD\",\"result\":\"styles_result__3ivTG\",\"resultDrag\":\"styles_resultDrag__3F2jK\",\"messageText\":\"styles_messageText__3PziE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileImg\":\"styles_profileImg__2xgSU\",\"profile_form\":\"styles_profile_form__3nryD\",\"topLineContainer\":\"styles_topLineContainer__-JsNv\",\"profileTopic\":\"styles_profileTopic__1KL6U\",\"name\":\"styles_name__1J8hG\",\"status\":\"styles_status__344Hm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"createNewChatForm_modal__2X5FK\",\"modal_content\":\"createNewChatForm_modal_content__VsNJG\",\"close\":\"createNewChatForm_close__3DTMr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dateTime\":\"singleMessage_dateTime__2etYS\",\"singleMessContainer\":\"singleMessage_singleMessContainer__3QHsN\",\"singleMess\":\"singleMessage_singleMess__2Tm8v\",\"msg\":\"singleMessage_msg__1XUX_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"plusbut\":\"plusButtonStyles_plusbut__ICY__\",\"horizontal_plus\":\"plusButtonStyles_horizontal_plus__HIBYs\",\"vertical_plus\":\"plusButtonStyles_vertical_plus__3Wy4d\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"topLine_container__1R9Zm\",\"chatImg\":\"topLine_chatImg__1A5Li\",\"topic\":\"topLine_topic__1fCyY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"arrow\":\"backArrow_arrow__ANJaT\",\"arrowTop\":\"backArrow_arrowTop__291_W\",\"arrowBottom\":\"backArrow_arrowBottom__2hX51\"};","import React from 'react'\nimport './BurgerButton.css'\n\nfunction BurgerButton() {\n  return (\n    <div className=\"burgerButt\">\n      <div />\n      <div />\n      <div />\n    </div>\n  )\n}\nexport default BurgerButton\n","import React from 'react'\nimport BurgerButton from '../BurgerButton/BurgerButton'\nimport './TopLineDialogList.css'\n\nfunction SearchBar() {\n  return <input type=\"text\" placeholder=\"Search..\" />\n}\n\nfunction TopLineDialogList() {\n  return (\n    <div className=\"container\">\n      <BurgerButton />\n      <SearchBar />\n    </div>\n  )\n}\n\nexport default TopLineDialogList\n","export const WHOAMI = { userId: 1 }\nexport const HOST = 'http://127.0.0.1:8000/'\n","import React, { useState } from 'react'\nimport Autosuggest from 'react-autosuggest'\nimport { HOST } from '../whoami'\n\nasync function getSuggestions(value, setState) {\n  fetch(HOST + 'users/profile/' + value, {\n    crossDomain: true,\n    mode: 'cors',\n    method: 'GET',\n    credentials: 'include',\n  })\n    .then((response) => {\n      return response.json()\n    })\n    .then((data) => {\n      const parsedDate = JSON.parse(data)\n      setState({ value: value, suggestions: parsedDate.users })\n    })\n}\n\nconst renderSuggestion = (suggestion) => <div>{`${suggestion.first_name} ${suggestion.last_name}`}</div>\n\n// SEARCH USERS\nfunction UserSuggester({ selectedUsers, setSelectedUsers }) {\n  const [state, setState] = useState({\n    value: '',\n    suggestions: [],\n  })\n  const onChange = (event, { newValue }) => {\n    setState({\n      ...state,\n      value: newValue,\n    })\n  }\n  // Autosuggest will call this function every time you need to clear suggestions.\n  const onSuggestionsClearRequested = () => {\n    setState({\n      value: '',\n      suggestions: [],\n    })\n  }\n\n  // When suggestion is clicked, Autosuggest needs to populate the input\n  // based on the clicked suggestion. Teach Autosuggest how to calculate the\n  // input value for every given suggestion.\n  const getSuggestionValue = (suggestion) => suggestion.name\n\n  // Autosuggest will call this function every time you need to update suggestions.\n  // You already implemented this logic above, so just use it.\n  const onSuggestionsFetchRequested = ({ value }) => {\n    getSuggestions(value, setState)\n  }\n\n  const inputProps = {\n    placeholder: 'Type a some part of user name',\n    value: state.value,\n    onChange: onChange.bind(this),\n  }\n\n  const onSuggestionSelected = (e, { suggestion }) => {\n    console.log(suggestion)\n    setSelectedUsers([...selectedUsers, suggestion])\n  }\n\n  return (\n    <Autosuggest\n      suggestions={state.suggestions}\n      onSuggestionsFetchRequested={onSuggestionsFetchRequested}\n      onSuggestionsClearRequested={onSuggestionsClearRequested}\n      getSuggestionValue={getSuggestionValue}\n      renderSuggestion={renderSuggestion}\n      inputProps={inputProps}\n      onSuggestionSelected={onSuggestionSelected}\n    />\n  )\n}\n\nexport default UserSuggester\n","import React, { useState, useEffect } from 'react'\nimport * as plusButtonStyles from './plusButtonStyles.module.css'\nimport * as CNDialogFormStyles from './createNewChatForm.module.css'\nimport UserAppender from './UserAppender'\nimport { HOST } from '../whoami'\n\n// create new Chat in local storage and return created chat\nfunction createNewChat(Topic, selectedUsers) {\n  const data = { topic: Topic, users_ids: selectedUsers.map((user, index) => user.id) }\n  // Значения по умолчанию обозначены знаком *\n  return fetch(HOST + 'chats/create_chat', {\n    method: 'POST', // *GET, POST, PUT, DELETE, etc.\n    mode: 'cors', // no-cors, cors, *same-origin\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n    credentials: 'include', // include, *same-origin, omit\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(data), // тип данных в body должен соответвовать значению заголовка \"Content-Type\"\n  }).then((response) => response.json()) // парсит JSON ответ в Javascript объект\n}\n\nfunction PlusButton({ setHiding }) {\n  return (\n    <div role=\"button\" id=\"isActiveForSetHiding\" tabIndex={0} className={plusButtonStyles.plusbut} onClick={setHiding}>\n      <div className={plusButtonStyles.horizontal_plus} id=\"isActiveForSetHiding\" />\n      <div className={plusButtonStyles.vertical_plus} id=\"isActiveForSetHiding\" />\n    </div>\n  )\n}\n\nfunction CreateNewDialogForm({ isHide, setHiding, setChats, chats }) {\n  const [selectedUsers, setSelectedUsers] = useState([])\n\n  let topicForm = null\n  const createChatButt = (e) => {\n    e.preventDefault()\n    setChats(\n      (() => {\n        const newChat = createNewChat(topicForm.value, selectedUsers)\n        const newChats = [...chats, newChat]\n        return newChats\n      })(),\n    )\n    setHiding(e)\n  }\n\n  useEffect(() => {\n    setSelectedUsers([])\n  }, [isHide])\n\n  return (\n    <div\n      className={CNDialogFormStyles.modal}\n      id=\"isActiveForSetHiding\"\n      style={isHide ? { display: 'block' } : { display: 'none' }}\n      role=\"button\"\n      tabIndex={0}\n      onClick={setHiding}\n    >\n      <div className={CNDialogFormStyles.modal_content}>\n        <span\n          className={CNDialogFormStyles.close}\n          id=\"isActiveForSetHiding\"\n          role=\"button\"\n          tabIndex={0}\n          onClick={setHiding}\n        >\n          &times;\n        </span>\n        <h2>Create new chat</h2>\n        <br />\n        <input\n          className={CNDialogFormStyles.topic}\n          ref={(input) => {\n            topicForm = input\n          }}\n          type=\"text\"\n          name=\"topic\"\n          placeholder=\"Chat Topic\"\n        />\n\n        <UserAppender selectedUsers={selectedUsers} setSelectedUsers={setSelectedUsers} />\n\n        <div\n          style={{\n            width: '80%',\n          }}\n        >\n          {selectedUsers.map((user, index) => (\n            <div key={index.toString()}>\n              <p>{`${user.first_name} ${user.last_name}`}</p>\n            </div>\n          ))}\n        </div>\n        <button onClick={createChatButt}>\n          <span id=\"isActiveForSetHiding\">Create new chat</span>\n        </button>\n      </div>\n    </div>\n  )\n}\n\nfunction CreateChatStuff({ setChats, chats }) {\n  const [hidden, setHiding] = useState(false)\n  const handleClick = (e) => {\n    e.preventDefault()\n    e.stopPropagation()\n    if (e.target.id === 'isActiveForSetHiding') hidden ? setHiding(false) : setHiding(true)\n  }\n\n  return (\n    <>\n      <PlusButton setHiding={handleClick} />\n      <CreateNewDialogForm isHide={hidden} setHiding={handleClick} setChats={setChats} chats={chats} />\n    </>\n  )\n}\n\nexport default CreateChatStuff\n","import React, { useState, useEffect } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport TopLineDialogList from '../TopLineDialogList/TopLineDialogList'\nimport styles from './DialogList.module.css'\nimport CreateNewChat from '../CreateNewChat/CreateNewChat'\nimport { HOST } from '../whoami'\n\nconst getDialogsList = async (setChats) => {\n  try {\n    const response = await fetch(HOST + 'users/contacts_list', {\n      crossDomain: true,\n      mode: 'cors',\n      method: 'GET',\n      credentials: 'include',\n    })\n    if (response.status === 200) {\n      const myJson = await response.json() //extract JSON from the http response\n      const data = JSON.parse(myJson)\n      setChats(data)\n    } else {\n      console.log('not a 200')\n    }\n  } catch (err) {\n    // catches errors both in fetch and response.json\n    console.log(err)\n  } finally {\n    // do it again in 2 seconds\n    setTimeout(() => {\n      getDialogsList(setChats)\n    }, 5000)\n  }\n}\n\nasync function getChat(chatIdParameter, setAppState) {\n  try {\n    const response = await fetch(HOST + 'chats/get_chat/' + chatIdParameter, {\n      crossDomain: true,\n      mode: 'cors',\n      method: 'GET',\n      credentials: 'include',\n    })\n    if (response.status === 200) {\n      const myJson = await response.json() //extract JSON from the http response\n      const data = JSON.parse(myJson)\n      setAppState({\n        appPage: 'Chat',\n        openedChat: {\n          chatId: data.chat_id,\n          topic: data.topic,\n          messages: data.messages.reverse(),\n        },\n        prevAppPage: 'ChatList',\n      })\n    } else {\n      console.log('not a 200')\n    }\n  } catch (err) {\n    // catches errors both in fetch and response.json\n    console.log(err)\n  }\n}\n\nconst GenerateList = (chats, appState, setAppState) => {\n  let history = useHistory()\n  return chats.map((chat, index) => (\n    <div className={styles.chatwrap} key={index.toString()}>\n      <div\n        onClick={(e) => {\n          history.push(`${window.publicUrl}/chat`)\n          setAppState({ ...appState, openedChat: { ...appState.openedChat, chatId: chat.chat_id } })\n          openChat(chat.chat_id, setAppState)\n        }}\n        role=\"button\"\n        tabIndex={0}\n        className={styles.wrap}\n        id={chat.chat_id}\n      >\n        <img className={styles.chatImg} src=\"http://emilcarlsson.se/assets/rachelzane.png\" alt=\"\" />\n        <div className={styles.meta}>\n          <div className={styles.topic}>{`${chat.chat__topic}`} </div>\n          <div className={styles.preview}>{chat.chat__last_message} </div>\n        </div>\n        <div className={styles.addinfo}>\n          <span className={styles.dot} />\n          <p>21:23</p>\n        </div>\n      </div>\n    </div>\n  ))\n}\n\nfunction DialogListImpl({ chats, appState, setAppState }) {\n  return (\n    <div className={styles.dialogsListContainer}>{chats !== null && GenerateList(chats, appState, setAppState)}</div>\n  )\n}\n\nfunction openChat(chatId, setAppState) {\n  getChat(chatId, setAppState)\n}\n\nfunction DialogList({ appState, setAppState }) {\n  const [chats, setChats] = useState([])\n  const loadExistingChats = () => {\n    getDialogsList(setChats)\n  }\n  useEffect(loadExistingChats, [])\n\n  return (\n    <div className={styles.dialog_list_wrap}>\n      <TopLineDialogList />\n      <DialogListImpl chats={chats} setChats={setChats} appState={appState} setAppState={setAppState} />\n      <CreateNewChat setChats={setChats} chats={chats} />\n    </div>\n  )\n}\n\nexport default DialogList\n","import React from 'react'\nimport style from './backArrow.module.css'\n\nfunction BackArrow() {\n  return (\n    <div\n      className={style.arrow}\n      style={{\n        transform: 'scale(-1, 1) scale(0.3)',\n      }}\n    >\n      <div className={style.arrowTop} />\n      <div className={style.arrowBottom} />\n    </div>\n  )\n}\n\nexport default BackArrow\n","export const PAPER_AIRPLANE = `\n<svg version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\n\t viewBox=\"0 0 512 512\" style=\"max-height: 100%;\" style=\"enable-background:new 0 0 512 512;\" xml:space=\"preserve\" fill=\"blue\">\n<g>\n\t<g>\n\t\t<path d=\"M506.955,1.314c-3.119-1.78-6.955-1.75-10.045,0.078L313.656,109.756c-4.754,2.811-6.329,8.943-3.518,13.697\n\t\t\tc2.81,4.753,8.942,6.328,13.697,3.518l131.482-77.749L210.411,303.335L88.603,266.069l158.965-94\n\t\t\tc4.754-2.812,6.329-8.944,3.518-13.698c-2.81-4.753-8.943-6.33-13.697-3.518L58.91,260.392c-3.41,2.017-5.309,5.856-4.84,9.791\n\t\t\ts3.216,7.221,7.004,8.38l145.469,44.504L270.72,439.88c0.067,0.121,0.136,0.223,0.207,0.314c1.071,1.786,2.676,3.245,4.678,4.087\n\t\t\tc1.253,0.527,2.57,0.784,3.878,0.784c2.563,0,5.086-0.986,6.991-2.849l73.794-72.12l138.806,42.466\n\t\t\tc0.96,0.293,1.945,0.438,2.925,0.438c2.116,0,4.206-0.672,5.948-1.961C510.496,409.153,512,406.17,512,403V10\n\t\t\tC512,6.409,510.074,3.093,506.955,1.314z M271.265,329.23c-1.158,1.673-1.779,3.659-1.779,5.694v61.171l-43.823-79.765\n\t\t\tl193.921-201.21L271.265,329.23z M289.486,411.309v-62.867l48.99,14.988L289.486,411.309z M492,389.483l-196.499-60.116\n\t\t\tL492,45.704V389.483z\"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d=\"M164.423,347.577c-3.906-3.905-10.236-3.905-14.143,0l-93.352,93.352c-3.905,3.905-3.905,10.237,0,14.143\n\t\t\tC58.882,457.024,61.441,458,64,458s5.118-0.976,7.071-2.929l93.352-93.352C168.328,357.815,168.328,351.483,164.423,347.577z\"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d=\"M40.071,471.928c-3.906-3.903-10.236-3.903-14.142,0.001l-23,23c-3.905,3.905-3.905,10.237,0,14.143\n\t\t\tC4.882,511.024,7.441,512,10,512s5.118-0.977,7.071-2.929l23-23C43.976,482.166,43.976,475.834,40.071,471.928z\"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d=\"M142.649,494.34c-1.859-1.86-4.439-2.93-7.069-2.93c-2.641,0-5.21,1.07-7.07,2.93c-1.86,1.86-2.93,4.43-2.93,7.07\n\t\t\tc0,2.63,1.069,5.21,2.93,7.07c1.86,1.86,4.44,2.93,7.07,2.93s5.21-1.07,7.069-2.93c1.86-1.86,2.931-4.44,2.931-7.07\n\t\t\tC145.58,498.77,144.51,496.2,142.649,494.34z\"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d=\"M217.051,419.935c-3.903-3.905-10.233-3.905-14.142,0l-49.446,49.445c-3.905,3.905-3.905,10.237,0,14.142\n\t\t\tc1.953,1.953,4.512,2.929,7.071,2.929s5.118-0.977,7.071-2.929l49.446-49.445C220.956,430.172,220.956,423.84,217.051,419.935z\"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d=\"M387.704,416.139c-3.906-3.904-10.236-3.904-14.142,0l-49.58,49.58c-3.905,3.905-3.905,10.237,0,14.143\n\t\t\tc1.953,1.952,4.512,2.929,7.071,2.929s5.118-0.977,7.071-2.929l49.58-49.58C391.609,426.377,391.609,420.045,387.704,416.139z\"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d=\"M283.5,136.31c-1.86-1.86-4.44-2.93-7.07-2.93s-5.21,1.07-7.07,2.93c-1.859,1.86-2.93,4.44-2.93,7.08\n\t\t\tc0,2.63,1.07,5.2,2.93,7.06c1.86,1.87,4.44,2.93,7.07,2.93s5.21-1.06,7.07-2.93c1.859-1.86,2.93-4.43,2.93-7.06\n\t\t\tC286.43,140.75,285.36,138.17,283.5,136.31z\"/>\n\t</g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n</svg>\n`\n\nexport const CLIP = `\n<svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\n\tposition=\"relative\" style=\"max-height: 100%;\" viewBox=\"0 0 512 512\" enable-background=\"new 0 0 512 512\" xml:space=\"preserve\" fill=\"blue\">\n<g>\n\t<path d=\"M97.344,482.17c-23.311,0-45.215-9.084-61.689-25.555c-34.01-34.014-34.01-89.361,0-123.371L305.343,63.543\n\t\tc21.727-21.75,50.645-33.713,81.39-33.713c30.75,0,59.667,11.963,81.395,33.713c21.748,21.744,33.726,50.645,33.726,81.389\n\t\tc0,30.75-11.964,59.65-33.708,81.381L255.843,438.596c-6.374,6.371-16.696,6.371-23.067,0c-6.374-6.373-6.374-16.695,0-23.07\n\t\tl212.298-212.283c15.583-15.58,24.153-36.291,24.153-58.311c0-22.016-8.588-42.74-24.167-58.322\n\t\tc-15.583-15.58-36.294-24.154-58.327-24.154c-22.029,0-42.74,8.574-58.323,24.154L58.725,356.311\n\t\tc-21.283,21.301-21.283,55.938,0,77.234c20.645,20.617,56.589,20.617,77.233,0l181.091-181.105\n\t\tc4.924-4.924,7.745-11.74,7.745-18.688c0-7.045-2.755-13.686-7.759-18.689c-10.291-10.291-27.067-10.322-37.358,0L156,338.754\n\t\tc-6.37,6.375-16.697,6.375-23.067,0c-6.374-6.371-6.374-16.697,0-23.066l123.673-123.691c23.005-23.004,60.461-23.004,83.497,0\n\t\tc11.169,11.166,17.317,26,17.317,41.756c0,15.547-6.308,30.762-17.3,41.754L159.029,456.615\n\t\tC142.555,473.086,120.65,482.17,97.344,482.17z\"/>\n</g>\n</svg>\n`\n\nexport const FILE_ICON = `\n<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>\n<!-- Generator: Adobe Illustrator 18.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<svg version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\n\t viewBox=\"0 0 317.001 317.001\" style=\"enable-background:new 0 0 317.001 317.001;\" xml:space=\"preserve\">\n<path d=\"M270.825,70.55L212.17,3.66C210.13,1.334,207.187,0,204.093,0H55.941C49.076,0,43.51,5.566,43.51,12.431V304.57\n\tc0,6.866,5.566,12.431,12.431,12.431h205.118c6.866,0,12.432-5.566,12.432-12.432V77.633\n\tC273.491,75.027,272.544,72.51,270.825,70.55z M55.941,305.073V12.432H199.94v63.601c0,3.431,2.78,6.216,6.216,6.216h54.903\n\tl0.006,222.824H55.941z\"/>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n</svg>`\n","export const openAudioMessagePage = () => {\n  return {\n    type: 'HIDE_OR_DRAW_RECORDER_PAGE',\n  }\n}\n","import React, { useState } from 'react'\nimport { ReactMic } from 'react-mic'\nimport { useSelector, useDispatch } from 'react-redux'\nimport styled from 'styled-components'\nimport { WHOAMI } from '../whoami'\nimport { openAudioMessagePage } from '../../actions/sendMessage'\n\nexport class Message {\n  constructor(chatId, userId, messageText, contentType, link = '', fileName = '') {\n    this.messageText = messageText\n    this.userId = userId\n    this.time = getTime()\n    this.chatId = chatId\n    this.contentType = contentType\n    this.link = link\n    this.fileName = fileName\n  }\n}\n\n// to delete\nfunction getTime() {\n  const today = new Date()\n  const date = `${today.getFullYear()}-${today.getMonth() + 1}-${today.getDate()}`\n  const time = `${today.getHours()}:${today.getMinutes()}:${today.getSeconds()}`\n  return `${date} ${time}`\n}\n\nexport async function sendFile(file, appState, setAppState) {\n  generateFileMeassage(appState, setAppState, file)\n\n  const formData = new FormData()\n  formData.append('image', file)\n  try {\n    await fetch('https://tt-front.now.sh/upload', {\n      method: 'POST',\n      body: formData,\n    })\n  } catch (error) {\n    // eslint-disable-next-line\n    console.error('Ошибка:', error)\n  }\n}\n\nfunction generateFileMeassage(appState, setAppState, file) {\n  let contentType\n  if (file.type !== undefined && file.type.includes('image')) contentType = 'image'\n  else contentType = 'file'\n  const link = URL.createObjectURL(file)\n  const newMess = new Message(appState.openedChat.chatId, WHOAMI.userId, '', contentType, link, file.name)\n  setAppState({\n    ...appState,\n    ...Object.assign(appState.openedChat, { messages: [...appState.openedChat.messages, newMess] }),\n  })\n}\n\nconst CloseButt = styled.div`\n  position: relative;\n  flex: 1;\n  height: 100%;\n  opacity: 0.3;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  &:hover {\n    opacity: 1;\n  }\n  &:before,\n  &:after {\n    position: absolute;\n    content: ' ';\n    height: 30%;\n    width: 3px;\n    background-color: #333;\n  }\n  &:before {\n    transform: rotate(45deg);\n  }\n  &:after {\n    transform: rotate(-45deg);\n  }\n`\n\nconst StartStopButt = styled.div`\n  position: relative;\n  flex: 1;\n  height: 100%;\n  opacity: 0.3;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-color: #333;\n  font-size: 7vh;\n\n  &:hover {\n    opacity: 1;\n  }\n`\n\nexport function AudioMessageSender({ appState, setAppState }) {\n  const [stateReqord, setStateReqord] = useState({ record: false })\n  const isOpened = useSelector((state) => state.isMessagePageOpen)\n  const dispatch = useDispatch()\n\n  const startRecording = () => {\n    setStateReqord({\n      record: true,\n    })\n  }\n\n  const stopRecording = () => {\n    setStateReqord({\n      record: false,\n    })\n  }\n\n  const onStop = (recordedBlob) => {\n    console.log('recordedBlob is: ', recordedBlob)\n    const newMess = new Message(appState.openedChat.chatId, WHOAMI.userId, '', 'audioMessage', recordedBlob.blobURL)\n    // postMessage(newMess);\n    dispatch(openAudioMessagePage())\n    setAppState({\n      ...appState,\n      ...Object.assign(appState.openedChat, { messages: [...appState.openedChat.messages, newMess] }),\n    })\n    sendAudioMessage(recordedBlob)\n  }\n\n  return (\n    <div\n      style={{\n        width: '100%',\n        height: '100%',\n        position: 'absolute',\n        left: '0px',\n        top: '0px',\n        display: isOpened ? 'flex' : 'none',\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: 'rgba(0,0,0,0.4)',\n      }}\n    >\n      <div\n        style={{\n          width: '80%',\n          height: '60%',\n          backgroundColor: '#fefefe',\n          borderRadius: '25px',\n          overflow: 'hidden',\n          display: 'flex',\n          flexDirection: 'column',\n        }}\n      >\n        <div style={{ flex: '1' }}>\n          <ReactMic\n            record={stateReqord.record}\n            className=\"frequencyBars\"\n            onStop={onStop}\n            strokeColor=\"blue\"\n            width={window.screen.width * 0.8}\n            height={window.screen.height * 0.3}\n          />\n        </div>\n\n        <div\n          style={{\n            flex: '1',\n            justifyContent: 'center',\n            alignItems: 'center',\n            display: 'flex',\n          }}\n        >\n          <CloseButt\n            onClick={() => {\n              stopRecording()\n              dispatch(openAudioMessagePage())\n            }}\n          />\n          <StartStopButt\n            onClick={(e) => {\n              e.preventDefault()\n              stateReqord.record ? stopRecording(e) : startRecording(e)\n            }}\n          >\n            {stateReqord.record ? 'Send' : 'Start'}{' '}\n          </StartStopButt>\n          {/* <button onClick={startRecording} type=\"button\">Start</button>\n          <button onClick={stopRecording} type=\"button\">Stop</button> */}\n        </div>\n        {/* <ReactAudioPlayer\n          src={stateReqord.url}\n          autoPlay\n          controls\n        /> */}\n      </div>\n    </div>\n  )\n}\n\nasync function sendAudioMessage(audioBlob) {\n  const formData = new FormData()\n  formData.append('audio', audioBlob)\n  try {\n    await fetch('https://tt-front.now.sh/upload', {\n      method: 'POST',\n      body: formData,\n    })\n  } catch (error) {\n    // eslint-disable-next-line\n    console.error('Ошибка:', error)\n  }\n}\n","import React, { useEffect, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { useDispatch } from 'react-redux'\nimport ReactAudioPlayer from 'react-audio-player'\nimport PropTypes from 'prop-types'\nimport { usePosition } from 'use-position'\nimport singleMessStyles from './singleMessage.module.css'\nimport { WHOAMI, HOST } from '../whoami'\nimport topLineStyles from './topLine.module.css'\nimport styles from './styles.module.css'\nimport BackArrow from '../BackArrow/BackArrow'\nimport { PAPER_AIRPLANE, CLIP, FILE_ICON } from './svgVariables'\nimport { openAudioMessagePage } from '../../actions/sendMessage'\nimport { AudioMessageSender, sendFile, Message } from './utils'\n\n// FIX, need to update only messages that don't exist yet\nasync function getChat(chatIdParameter, setAppState) {\n  try {\n    const response = await fetch(HOST + 'chats/get_chat/' + chatIdParameter, {\n      crossDomain: true,\n      mode: 'cors',\n      method: 'GET',\n      credentials: 'include',\n    })\n    if (response.status === 200) {\n      const myJson = await response.json() //extract JSON from the http response\n      const data = JSON.parse(myJson)\n      setAppState({\n        appPage: 'Chat',\n        openedChat: {\n          chatId: data.chat_id,\n          topic: data.topic,\n          messages: data.messages.reverse(),\n        },\n        prevAppPage: 'ChatList',\n      })\n      console.log(data.messages)\n    } else {\n      console.log('not a 200')\n    }\n  } catch (err) {\n    // catches errors both in fetch and response.json\n    console.log(err)\n  } finally {\n    // do it again in 2 seconds\n    window.timerGettingMess = setTimeout(() => {\n      getChat(chatIdParameter, setAppState)\n    }, 5000)\n  }\n}\n\nasync function postMessage(message) {\n  const formData = new FormData()\n\n  formData.append('user_id', message.users_id)\n  formData.append('chat_id', message.chat_id)\n  formData.append('content', message.content)\n\n  const response = await fetch(HOST + 'chats/send_message', {\n    method: 'POST',\n    body: formData,\n  })\n}\n\nfunction TopLine({ topic, appState, setAppState }) {\n  const history = useHistory()\n  return (\n    <div id=\"chatTopLine\" className={topLineStyles.container}>\n      <div\n        id=\"chatBack\"\n        onClick={(e) => {\n          clearTimeout(window.timerGettingMess)\n          setAppState({ ...appState, appPage: 'ChatList', prevAppPage: history.location })\n          history.push(`${window.publicUrl}/`)\n        }}\n        onKeyDown={(e) => {}}\n        style={{ flex: '0.2' }}\n        role=\"button\"\n        tabIndex={0}\n      >\n        <BackArrow />\n      </div>\n      <div className={topLineStyles.topic}> {topic} </div>\n    </div>\n  )\n}\n\nfunction MessagesContainer({ messages, appState, setAppState }) {\n  const [dragging, setDragging] = useState(false)\n  const mContainer = React.createRef()\n  const history = useHistory()\n  // eslint-disable-next-line\n  useEffect(() => {\n    // Обновляем заголовок документа с помощью API браузера\n    // eslint-disable-next-line\n    mContainer.current.scrollTop = mContainer.current.scrollHeight\n    // eslint-disable-next-line\n  }, [messages])\n\n  // DRAGDandDROP\n  const handleDragIn = (e) => {\n    e.preventDefault()\n    e.stopPropagation()\n    setDragging(true)\n  }\n\n  const handleDragOut = (e) => {\n    e.persist()\n    e.preventDefault()\n    e.stopPropagation()\n    setDragging(false)\n  }\n\n  const handleDrop = (e) => {\n    setDragging(false)\n    e.preventDefault()\n    e.stopPropagation()\n    if (e.dataTransfer.items[0].kind !== 'file') return\n    const file = e.dataTransfer.items[0].getAsFile()\n    sendFile(file, appState, setAppState)\n  }\n  // END DRAGDandDROP\n  return (\n    <div className={styles.result} style={{ scrollTop: 'scrollHeight' }} ref={mContainer} onDragEnter={handleDragIn}>\n      <DragAndDropImg dragging={dragging} handleDragOut={handleDragOut} handleDrop={handleDrop} />\n      <AudioMessageSender appState={appState} setAppState={setAppState} />\n\n      {messages.map((message, index) => (\n        <div\n          key={index.toString()}\n          className={singleMessStyles.singleMessContainer}\n          onDrop={(e) => {\n            e.preventDefault()\n          }}\n        >\n          <input\n            type=\"image\"\n            onClick={(e) => {\n              // setAppState(Object.assign({}, appState, {appPage: 'ProfilePage', prevAppPage: 'Chat'}));\n              history.push(`${window.publicUrl}/profile`, appState)\n            }}\n            className={topLineStyles.chatImg}\n            src=\"http://emilcarlsson.se/assets/rachelzane.png\"\n            alt=\"Avatar\"\n          />\n          <div className={singleMessStyles.singleMess} sender={message.users_id === WHOAMI.userId ? 'me' : 'him'}>\n            <div className={singleMessStyles.singleMessText}>\n              {(() => {\n                switch (message.contentType) {\n                  case 'link':\n                    return <a href={message.content}> {message.content} </a>\n                  case 'image':\n                    return <img alt=\"\" src={message.link} style={{ maxWidth: '100%' }} />\n                  case 'file':\n                    return (\n                      <div style={{ display: 'inline' }}>\n                        <a\n                          aria-label=\"location\"\n                          // eslint-disable-next-line\n                          dangerouslySetInnerHTML={{ __html: FILE_ICON }}\n                          href={message.link}\n                          style={{\n                            height: '50%',\n                          }}\n                        />\n                        <p>{message.fileName}</p>\n                      </div>\n                    )\n                  case 'audioMessage':\n                    return (\n                      <div>\n                        <ReactAudioPlayer src={message.link} autoPlay controls />\n                      </div>\n                    )\n                  default:\n                    return <div> {message.messageText} </div>\n                }\n                if (message.contentType === 'link') return <a href={message.messageText}> {message.content} </a>\n                return <div> {message.content} </div>\n              })()}\n            </div>\n            <p className={singleMessStyles.dateTime}> {message.added_at} </p>\n          </div>\n        </div>\n      ))}\n    </div>\n  )\n}\n\nfunction InputPanel({ appState, setAppState }) {\n  const dispatch = useDispatch()\n\n  const sendMessage = (e) => {\n    e.preventDefault()\n    const messText = e.target[0].value\n    if (messText.replace(/\\s/gi, '') === '') {\n      return\n    }\n    const newMess = new Message(appState.openedChat.chatId, WHOAMI.userId, messText, 'text')\n    setAppState({\n      ...appState,\n      ...Object.assign(appState.openedChat, { messages: [...appState.openedChat.messages, newMess] }),\n    })\n    postMessage(newMess)\n    e.target[0].value = ''\n  }\n\n  const textInput = React.createRef()\n  const attachmentTypeDiv = React.createRef()\n  const { latitude, longitude } = usePosition()\n\n  const GeolocationHandler = (e) => {\n    e.preventDefault()\n    const newMess = new Message(\n      appState.openedChat.chatId,\n      WHOAMI.userId,\n      `https://www.openstreetmap.org/#map=18/${latitude}/${longitude}`,\n      'link',\n    )\n    postMessage(newMess)\n    setAppState({\n      ...appState,\n      ...Object.assign(appState.openedChat, { messages: [...appState.openedChat.messages, newMess] }),\n    })\n    attachmentTypeDiv.current.style.transform = 'scale(0)'\n  }\n\n  return (\n    <div className={styles.input_panel}>\n      <form className={styles.sendMessForm} onSubmit={sendMessage}>\n        <input\n          ref={textInput}\n          type=\"text\"\n          className={styles.messageText}\n          maxLength=\"512\"\n          placeholder=\"Введите сообщеине\"\n        />\n        <div\n          style={{\n            margin: '5px',\n            flex: '0.3',\n            maxHeight: '100%',\n          }}\n        >\n          <div ref={attachmentTypeDiv} className={styles.attachmentType}>\n            <label id=\"input\">\n              <input\n                type=\"file\"\n                name=\"file\"\n                onChange={(e) => {\n                  attachmentTypeDiv.current.style.transform = 'scale(0)'\n                  sendFile(e.target.files[0], appState, setAppState)\n                }}\n                onKeyDown={(e) => {}}\n                style={{ display: 'none' }}\n              />\n              <div>Файл</div>\n            </label>\n            <div role=\"button\" onClick={GeolocationHandler} onKeyDown={(e) => {}}>\n              Моя геолокации\n            </div>\n            <div\n              onClick={(e) => {\n                dispatch(openAudioMessagePage())\n                attachmentTypeDiv.current.style.transform = 'scale(0)'\n              }}\n            >\n              {' '}\n              Аудиосообщение{' '}\n            </div>\n          </div>\n          <div\n            aria-label=\"send message\"\n            // eslint-disable-next-line\n            dangerouslySetInnerHTML={{ __html: CLIP }}\n            style={{\n              height: '100%',\n            }}\n            role=\"button\"\n            tabIndex={-1}\n            onKeyDown={() => {}}\n            onClick={(e) => {\n              attachmentTypeDiv.current.style.transform =\n                attachmentTypeDiv.current.style.transform !== 'scale(1)' ? 'scale(1)' : 'scale(0)'\n            }}\n          />\n        </div>\n\n        <label\n          style={{\n            flex: '0.3',\n            display: 'flex',\n            maxHeight: '100%',\n          }}\n        >\n          <input style={{ display: 'none' }} type=\"submit\" value=\"\" />\n\n          <div dangerouslySetInnerHTML={{ __html: PAPER_AIRPLANE }} style={{ flex: '1', margin: '5px' }} />\n        </label>\n      </form>\n    </div>\n  )\n}\n\nfunction MessageForm({ appState, setAppState }) {\n  useEffect(() => {\n    console.log(appState.openedChat)\n    getChat(appState.openedChat.chatId, setAppState)\n  }, [])\n  return (\n    <div className={styles.message_form}>\n      <TopLine topic={appState.openedChat.topic} appState={appState} setAppState={setAppState} />\n      <MessagesContainer messages={appState.openedChat.messages} appState={appState} setAppState={setAppState} />\n      <InputPanel appState={appState} setAppState={setAppState} />\n    </div>\n  )\n}\n\nfunction DragAndDropImg({ dragging, handleDragOut, handleDrop }) {\n  return (\n    dragging && (\n      <div\n        onDragLeave={handleDragOut}\n        onDrop={handleDrop}\n        onDragOver={(e) => {\n          e.preventDefault()\n          e.stopPropagation()\n        }}\n        onDragEnter={(e) => {\n          e.preventDefault()\n          e.stopPropagation()\n        }}\n        style={{\n          border: 'dashed grey 4px',\n          backgroundColor: 'rgba(255,255,255,.8)',\n          position: 'absolute',\n          top: '10vh',\n          bottom: '10vh',\n          left: 0,\n          right: 0,\n          zIndex: 9999,\n        }}\n      >\n        <div\n          style={{\n            position: 'absolute',\n            top: '50%',\n            right: 0,\n            left: 0,\n            textAlign: 'center',\n            color: 'grey',\n            fontSize: 36,\n          }}\n        >\n          <div>drop here :)</div>\n        </div>\n      </div>\n    )\n  )\n}\n\nMessageForm.propTypes = {\n  appState: PropTypes.shape({\n    appPage: PropTypes.string.isRequired,\n    openedChat: PropTypes.shape({\n      chatId: PropTypes.number,\n      topic: PropTypes.string.isRequired,\n      messages: PropTypes.array.isRequired,\n    }),\n  }).isRequired,\n  setAppState: PropTypes.func.isRequired,\n}\n\nInputPanel.propTypes = {\n  appState: PropTypes.shape({\n    appPage: PropTypes.string.isRequired,\n    openedChat: PropTypes.shape({\n      chatId: PropTypes.number,\n      topic: PropTypes.string.isRequired,\n      messages: PropTypes.array.isRequired,\n    }),\n  }).isRequired,\n  setAppState: PropTypes.func.isRequired,\n}\n\nMessagesContainer.propTypes = {\n  messages: PropTypes.arrayOf(PropTypes.object).isRequired,\n  appState: PropTypes.shape({\n    appPage: PropTypes.string.isRequired,\n    openedChat: PropTypes.shape({\n      chatId: PropTypes.number,\n      topic: PropTypes.string.isRequired,\n      messages: PropTypes.array.isRequired,\n    }),\n  }).isRequired,\n  setAppState: PropTypes.func.isRequired,\n}\n\nTopLine.propTypes = {\n  topic: PropTypes.string.isRequired,\n  appState: PropTypes.shape({\n    appPage: PropTypes.string.isRequired,\n    openedChat: PropTypes.shape({\n      chatId: PropTypes.number,\n      topic: PropTypes.string.isRequired,\n      messages: PropTypes.array.isRequired,\n    }),\n  }).isRequired,\n  setAppState: PropTypes.func.isRequired,\n}\n\nexport default MessageForm\n","import React from 'react'\nimport { useHistory } from 'react-router-dom'\nimport styles from './styles.module.css'\nimport BackArrow from '../BackArrow/BackArrow'\n\nfunction TopLine({ appState, setAppState }) {\n  const history = useHistory()\n  return (\n    <div id=\"profileTopLine\" className={styles.topLineContainer}>\n      <div\n        id=\"profileBack\"\n        onClick={(e) => {\n          history.push(`${window.publicUrl}/${appState.prevAppPage}`)\n        }}\n        style={{ flex: '0.2' }}\n        role=\"button\"\n        tabIndex={0}\n      >\n        <BackArrow />\n      </div>\n      <div className={styles.profileTopic}> Profile Page </div>\n    </div>\n  )\n}\n\nfunction ProfilePage({ appState, setAppState }) {\n  return (\n    <div className={styles.profile_form}>\n      <TopLine appState={appState} setAppState={setAppState} />\n      <img className={styles.profileImg} src=\"http://emilcarlsson.se/assets/rachelzane.png\" alt=\"Avatar\" />\n      <div className={styles.name}>Кирилл Чеканов</div>\n      <div className={styles.status}>Status: no pain no gain</div>\n    </div>\n  )\n}\n\nexport default ProfilePage\n","import React, { useState, useEffect } from 'react'\nimport { BrowserRouter as Router, Route } from 'react-router-dom'\nimport { AnimatedSwitch } from 'react-router-transition'\nimport DialogList from './components/DialogList/DialogList'\nimport MessageForm from './components/DialogPage/MessageForm'\nimport ProfilePage from './components/ProfilePage/ProfilePage'\nimport './styles/globalStyles.css'\nimport { WHOAMI, HOST } from './components/whoami'\n\nasync function determineWhoAmI() {\n  try {\n    const response = await fetch(HOST + 'users/whoami', {\n      crossDomain: true,\n      mode: 'cors',\n      method: 'GET',\n      credentials: 'include',\n    })\n    if (response.status === 200) {\n      const myJson = await response.json() //extract JSON from the http response\n      const data = JSON.parse(myJson)\n      WHOAMI.userId = data.user_id\n    } else {\n      console.log('not a 200')\n    }\n  } catch (err) {\n    // catches errors both in fetch and response.json\n    console.log(err)\n  }\n}\n\nconst App = (props) => {\n  const [appState, setAppState] = useState({\n    appPage: '', // Chat, ProfilePage\n    prevAppPage: 'ChatList',\n    openedChat: {\n      chatId: -1,\n      topic: '',\n      messages: [],\n    },\n  })\n  useEffect(() => {\n    if (!Array.isArray(JSON.parse(localStorage.getItem('DialogList')))) localStorage.clear()\n    determineWhoAmI()\n  }, [])\n\n  window.publicUrl = process.env.NODE_ENV === 'production' ? process.env.PUBLIC_URL : ''\n  // FIX\n  if (window.publicUrl === '/static') window.publicUrl = ''\n  //\n  return (\n    <Router>\n      <AnimatedSwitch\n        atEnter={{ opacity: 0 }}\n        atLeave={{ opacity: 0 }}\n        atActive={{ opacity: 1 }}\n        className=\"switch-wrapper\"\n      >\n        <Route path={`${window.publicUrl}/chat/`}>\n          {(props) => {\n            if (appState.appPage !== 'Chat') setAppState({ ...appState, appPage: 'Chat' })\n            return <MessageForm appState={appState} setAppState={setAppState} />\n          }}\n        </Route>\n        <Route path={`${window.publicUrl}/`}>\n          {(props) => {\n            if (appState.appPage !== 'ChatList')\n              setAppState({ ...appState, appPage: 'ChatList', prevAppPage: appState.appPage })\n            return <DialogList appState={appState} setAppState={setAppState} />\n          }}\n        </Route>\n        <Route path={`${window.publicUrl}/profile/`}>\n          {(props) => {\n            if (appState.appPage !== 'ProfilePage')\n              setAppState({ ...appState, appPage: 'ProfilePage', prevAppPage: appState.appPage })\n            return <ProfilePage appState={appState} setAppState={setAppState} />\n          }}\n        </Route>\n      </AnimatedSwitch>\n    </Router>\n  )\n}\n\nexport default App\n","import { combineReducers } from 'redux'\nimport { audioMessagePageReducer } from './messagesReducers.js'\n\nconst allReducers = combineReducers({\n  isMessagePageOpen: audioMessagePageReducer,\n})\n\nexport default allReducers\n","const audioMessagePageReducer = (state = false, action) => {\n  // eslint-disable-next-line\n  switch (action.type) {\n    case 'HIDE_OR_DRAW_RECORDER_PAGE':\n      return !state\n    default:\n      return state\n  }\n}\n\nexport { audioMessagePageReducer }\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { createStore } from 'redux'\nimport { Provider } from 'react-redux'\nimport App from './App'\nimport allReducers from './reducers'\n\nconst store = createStore(allReducers, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n)\n"],"sourceRoot":""}